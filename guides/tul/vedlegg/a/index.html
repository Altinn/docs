<!DOCTYPE html>
<html lang="nb" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.30.2">
    <meta name="description" content="Dette vedlegget tar for seg hvordan man stegvis utvikler et Altinn-skjema / innsendingstjeneste i InfoPath.">
    <title>
      A: Skjemautvikling i InfoPath :: Altinn docs
    </title>
    <link rel="shortcut icon" href="/docs/images/favicon.png" type="image/x-icon">
    <link href="/docs/css/nucleus.css" rel="stylesheet">
    <link href="/docs/css/font-awesome.min.css" rel="stylesheet">
    <link href="/docs/css/hybrid.css" rel="stylesheet">
    <link href="/docs/css/featherlight.min.css" rel="stylesheet">
    <link href="/docs/css/horsey.css" rel="stylesheet">
    <link href="/docs/css/theme.css" rel="stylesheet">
    <link rel="stylesheet" href="/docs/css/bootstrap.min.css">
    <script src="/docs/js/jquery-2.x.min.js"></script>
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>
    <link href="/docs/css/altinn.css" rel="stylesheet">
  </head>
  <body class="" data-url="/docs/guides/tul/vedlegg/a/">
    <nav id="sidebar" class="">
      <div class="highlightable">
        <div id="header-wrapper">
          <div id="header">
            <p>
              <a href="/docs" title="Altinn docs"><img src="/docs/images/a-logo-white.svg" alt="Altinn"> docs</a>
            </p>
          </div>

          <div class="searchbox">
            <label for="search-by"><i class="fa fa-search"></i></label> <input data-search-input="" id="search-by" type="text" placeholder="Søk..."> <span data-search-clear=""><i class="fa fa-close"></i></span>
          </div>
          <script type="text/javascript" src="/docs/js/lunr.min.js"></script> 
          <script type="text/javascript" src="/docs/js/horsey.js"></script> 
          <script type="text/javascript">

          var baseurl = "https:\/\/altinn.github.io\/docs\/";
          </script> 
          <script type="text/javascript" src="/docs/js/search.js"></script>
        </div>

        <ul class="topics">
          <li data-nav-id="/docs/guides/" class="dd-item parent">
            <a href="/docs/guides/"><span>Guider</span> <i class="fa fa-angle-down fa-lg category-icon"></i></a>
            <ul>
              <li data-nav-id="/docs/guides/integrasjon/" class="dd-item">
                <a href="/docs/guides/integrasjon/"><span>Integrasjon</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                <ul>
                  <li data-nav-id="/docs/guides/integrasjon/generelt/" class="dd-item">
                    <a href="/docs/guides/integrasjon/generelt/"><span>Generelt</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                    <ul>
                      <li data-nav-id="/docs/guides/integrasjon/generelt/overordnet/" class="dd-item">
                        <a href="/docs/guides/integrasjon/generelt/overordnet/"><span>Overordnet</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/integrasjon/generelt/api-key/" class="dd-item">
                        <a href="/docs/guides/integrasjon/generelt/api-key/"><span>API-key</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/integrasjon/generelt/feil-og-mangler/" class="dd-item">
                        <a href="/docs/guides/integrasjon/generelt/feil-og-mangler/"><span>Kjente feil og mangler</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/integrasjon/generelt/retningslinjer/" class="dd-item">
                        <a href="/docs/guides/integrasjon/generelt/retningslinjer/"><span>Retningslinjer</span></a>
                      </li>
                    </ul>
                  </li>

                  <li data-nav-id="/docs/guides/integrasjon/tjenesteeiere/" class="dd-item">
                    <a href="/docs/guides/integrasjon/tjenesteeiere/"><span>Tjenesteeiere</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                    <ul>
                      <li data-nav-id="/docs/guides/integrasjon/tjenesteeiere/innledning/" class="dd-item">
                        <a href="/docs/guides/integrasjon/tjenesteeiere/innledning/"><span>Innledning</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/integrasjon/tjenesteeiere/api/" class="dd-item">
                        <a href="/docs/guides/integrasjon/tjenesteeiere/api/"><span>REST API</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                        <ul>
                          <li data-nav-id="/docs/guides/integrasjon/tjenesteeiere/api/registrering/" class="dd-item">
                            <a href="/docs/guides/integrasjon/tjenesteeiere/api/registrering/"><span>Registrering</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/integrasjon/tjenesteeiere/api/autorisasjon/" class="dd-item">
                            <a href="/docs/guides/integrasjon/tjenesteeiere/api/autorisasjon/"><span>Autorisasjon</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/integrasjon/tjenesteeiere/api/kontaktinformasjon/" class="dd-item">
                            <a href="/docs/guides/integrasjon/tjenesteeiere/api/kontaktinformasjon/"><span>Kontaktinformasjon</span></a>
                          </li>
                        </ul>
                      </li>

                      <li data-nav-id="/docs/guides/integrasjon/tjenesteeiere/webservice/" class="dd-item">
                        <a href="/docs/guides/integrasjon/tjenesteeiere/webservice/"><span>Web Service</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                        <ul>
                          <li data-nav-id="/docs/guides/integrasjon/tjenesteeiere/webservice/feilhandtering/" class="dd-item">
                            <a href="/docs/guides/integrasjon/tjenesteeiere/webservice/feilhandtering/"><span>Feilhåndtering</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/integrasjon/tjenesteeiere/webservice/feilkoder/" class="dd-item">
                            <a href="/docs/guides/integrasjon/tjenesteeiere/webservice/feilkoder/"><span>Feilkoder</span></a>
                          </li>
                        </ul>
                      </li>

                      <li data-nav-id="/docs/guides/integrasjon/tjenesteeiere/batch/" class="dd-item">
                        <a href="/docs/guides/integrasjon/tjenesteeiere/batch/"><span>Batch</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/integrasjon/tjenesteeiere/funksjonelle-scenario/" class="dd-item">
                        <a href="/docs/guides/integrasjon/tjenesteeiere/funksjonelle-scenario/"><span>Funksjonelle scenario</span></a>
                      </li>
                    </ul>
                  </li>

                  <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/" class="dd-item">
                    <a href="/docs/guides/integrasjon/sluttbrukere/"><span>Sluttbrukere</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                    <ul>
                      <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/" class="dd-item">
                        <a href="/docs/guides/integrasjon/sluttbrukere/api/"><span>REST API</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                        <ul>
                          <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/kom-i-gang/" class="dd-item">
                            <a href="/docs/guides/integrasjon/sluttbrukere/api/kom-i-gang/"><span>Kom i gang!</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/autentisering/" class="dd-item">
                            <a href="/docs/guides/integrasjon/sluttbrukere/api/autentisering/"><span>Autentisering</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                            <ul>
                              <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/autentisering/brukernavn-og-passord/" class="dd-item">
                                <a href="/docs/guides/integrasjon/sluttbrukere/api/autentisering/brukernavn-og-passord/"><span>Brukernavn og passord</span></a>
                              </li>

                              <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/autentisering/id-porten/" class="dd-item">
                                <a href="/docs/guides/integrasjon/sluttbrukere/api/autentisering/id-porten/"><span>ID-porten</span></a>
                              </li>

                              <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/autentisering/virksomhetssertifikat/" class="dd-item">
                                <a href="/docs/guides/integrasjon/sluttbrukere/api/autentisering/virksomhetssertifikat/"><span>Virksomhets­sertifikat</span></a>
                              </li>
                            </ul>
                          </li>

                          <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/autorisasjon/" class="dd-item">
                            <a href="/docs/guides/integrasjon/sluttbrukere/api/autorisasjon/"><span>Autorisasjon</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                            <ul>
                              <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/autorisasjon/roller-og-rettigheter/" class="dd-item">
                                <a href="/docs/guides/integrasjon/sluttbrukere/api/autorisasjon/roller-og-rettigheter/"><span>Roller og rettigheter</span></a>
                              </li>

                              <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/autorisasjon/rolledefinisjoner/" class="dd-item">
                                <a href="/docs/guides/integrasjon/sluttbrukere/api/autorisasjon/rolledefinisjoner/"><span>Rolle­definisjoner</span></a>
                              </li>
                            </ul>
                          </li>

                          <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/innsyn/" class="dd-item">
                            <a href="/docs/guides/integrasjon/sluttbrukere/api/innsyn/"><span>Innsyns­tjenester</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/meldinger/" class="dd-item">
                            <a href="/docs/guides/integrasjon/sluttbrukere/api/meldinger/"><span>Meldingsboks</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                            <ul>
                              <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/meldinger/hente/" class="dd-item">
                                <a href="/docs/guides/integrasjon/sluttbrukere/api/meldinger/hente/"><span>Hente</span></a>
                              </li>

                              <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/meldinger/oppdatere/" class="dd-item">
                                <a href="/docs/guides/integrasjon/sluttbrukere/api/meldinger/oppdatere/"><span>Oppdatere</span></a>
                              </li>

                              <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/meldinger/sende-inn/" class="dd-item">
                                <a href="/docs/guides/integrasjon/sluttbrukere/api/meldinger/sende-inn/"><span>Sende inn</span></a>
                              </li>

                              <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/meldinger/signere/" class="dd-item">
                                <a href="/docs/guides/integrasjon/sluttbrukere/api/meldinger/signere/"><span>Signere</span></a>
                              </li>

                              <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/meldinger/slette/" class="dd-item">
                                <a href="/docs/guides/integrasjon/sluttbrukere/api/meldinger/slette/"><span>Slette</span></a>
                              </li>
                            </ul>
                          </li>

                          <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/diverse/" class="dd-item">
                            <a href="/docs/guides/integrasjon/sluttbrukere/api/diverse/"><span>Diverse</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                            <ul>
                              <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/diverse/profil/" class="dd-item">
                                <a href="/docs/guides/integrasjon/sluttbrukere/api/diverse/profil/"><span>Profil</span></a>
                              </li>

                              <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/diverse/metadata/" class="dd-item">
                                <a href="/docs/guides/integrasjon/sluttbrukere/api/diverse/metadata/"><span>Metadata</span></a>
                              </li>

                              <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/diverse/samtykke/" class="dd-item">
                                <a href="/docs/guides/integrasjon/sluttbrukere/api/diverse/samtykke/"><span>Samtykke</span></a>
                              </li>

                              <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/diverse/formidling/" class="dd-item">
                                <a href="/docs/guides/integrasjon/sluttbrukere/api/diverse/formidling/"><span>Formidling</span></a>
                              </li>

                              <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/diverse/betaling/" class="dd-item">
                                <a href="/docs/guides/integrasjon/sluttbrukere/api/diverse/betaling/"><span>Betaling</span></a>
                              </li>

                              <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/api/diverse/referanse-app/" class="dd-item">
                                <a href="/docs/guides/integrasjon/sluttbrukere/api/diverse/referanse-app/"><span>Referanse-app</span></a>
                              </li>
                            </ul>
                          </li>
                        </ul>
                      </li>

                      <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/webservice/" class="dd-item">
                        <a href="/docs/guides/integrasjon/sluttbrukere/webservice/"><span>Web Service</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                        <ul>
                          <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/webservice/grensesnitt/" class="dd-item">
                            <a href="/docs/guides/integrasjon/sluttbrukere/webservice/grensesnitt/"><span>Grensesnitt</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/webservice/endepunkter-oversikt/" class="dd-item">
                            <a href="/docs/guides/integrasjon/sluttbrukere/webservice/endepunkter-oversikt/"><span>Endepunkter</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/webservice/funksjonelle-scenario/" class="dd-item">
                            <a href="/docs/guides/integrasjon/sluttbrukere/webservice/funksjonelle-scenario/"><span>Funksjonelle scenario</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/webservice/hvordan-komme-i-gang/" class="dd-item">
                            <a href="/docs/guides/integrasjon/sluttbrukere/webservice/hvordan-komme-i-gang/"><span>Hvordan komme i gang</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/webservice/roller-og-rettigheter/" class="dd-item">
                            <a href="/docs/guides/integrasjon/sluttbrukere/webservice/roller-og-rettigheter/"><span>Roller og rettigheter</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/webservice/skjemasett-sammenlikning/" class="dd-item">
                            <a href="/docs/guides/integrasjon/sluttbrukere/webservice/skjemasett-sammenlikning/"><span>Skjemasett sammenligning</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/integrasjon/sluttbrukere/webservice/teknisk-implementasjon/" class="dd-item">
                            <a href="/docs/guides/integrasjon/sluttbrukere/webservice/teknisk-implementasjon/"><span>Teknisk implementasjon</span></a>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li data-nav-id="/docs/guides/tul/" class="dd-item parent">
                <a href="/docs/guides/tul/"><span>TUL</span> <i class="fa fa-angle-down fa-lg category-icon"></i></a>
                <ul>
                  <li data-nav-id="/docs/guides/tul/innledning/" class="dd-item">
                    <a href="/docs/guides/tul/innledning/"><span>Innledning</span></a>
                  </li>

                  <li data-nav-id="/docs/guides/tul/kom-i-gang/" class="dd-item">
                    <a href="/docs/guides/tul/kom-i-gang/"><span>Kom i gang</span></a>
                  </li>

                  <li data-nav-id="/docs/guides/tul/tjenestetyper/" class="dd-item">
                    <a href="/docs/guides/tul/tjenestetyper/"><span>Tjenestetyper</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                    <ul>
                      <li data-nav-id="/docs/guides/tul/tjenestetyper/ny/" class="dd-item">
                        <a href="/docs/guides/tul/tjenestetyper/ny/"><span>Ny tjeneste og utgave</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/tjenestetyper/felles-funksjonalitet/" class="dd-item">
                        <a href="/docs/guides/tul/tjenestetyper/felles-funksjonalitet/"><span>Felles</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/tjenestetyper/formidling/" class="dd-item">
                        <a href="/docs/guides/tul/tjenestetyper/formidling/"><span>Formidling</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/tjenestetyper/innsending/" class="dd-item">
                        <a href="/docs/guides/tul/tjenestetyper/innsending/"><span>Innsending</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                        <ul>
                          <li data-nav-id="/docs/guides/tul/tjenestetyper/innsending/betaling/" class="dd-item">
                            <a href="/docs/guides/tul/tjenestetyper/innsending/betaling/"><span>Betaling</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/tul/tjenestetyper/innsending/master/" class="dd-item">
                            <a href="/docs/guides/tul/tjenestetyper/innsending/master/"><span>Master</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/tul/tjenestetyper/innsending/vedleggstyper/" class="dd-item">
                            <a href="/docs/guides/tul/tjenestetyper/innsending/vedleggstyper/"><span>Vedleggstyper</span></a>
                          </li>
                        </ul>
                      </li>

                      <li data-nav-id="/docs/guides/tul/tjenestetyper/innsyn/" class="dd-item">
                        <a href="/docs/guides/tul/tjenestetyper/innsyn/"><span>Innsyn</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/tjenestetyper/lenke/" class="dd-item">
                        <a href="/docs/guides/tul/tjenestetyper/lenke/"><span>Lenke</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/tjenestetyper/melding/" class="dd-item">
                        <a href="/docs/guides/tul/tjenestetyper/melding/"><span>Melding</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/tjenestetyper/samhandling/" class="dd-item">
                        <a href="/docs/guides/tul/tjenestetyper/samhandling/"><span>Samhandling</span></a>
                      </li>
                    </ul>
                  </li>

                  <li data-nav-id="/docs/guides/tul/funksjonalitet/" class="dd-item">
                    <a href="/docs/guides/tul/funksjonalitet/"><span>Funksjonalitet</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                    <ul>
                      <li data-nav-id="/docs/guides/tul/funksjonalitet/kodelister/" class="dd-item">
                        <a href="/docs/guides/tul/funksjonalitet/kodelister/"><span>Kodelister</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/funksjonalitet/migrering/" class="dd-item">
                        <a href="/docs/guides/tul/funksjonalitet/migrering/"><span>Migrering</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/funksjonalitet/oversetting/" class="dd-item">
                        <a href="/docs/guides/tul/funksjonalitet/oversetting/"><span>Oversetting</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/funksjonalitet/rolleadministrasjon/" class="dd-item">
                        <a href="/docs/guides/tul/funksjonalitet/rolleadministrasjon/"><span>Rolleadministrasjon</span></a>
                      </li>
                    </ul>
                  </li>

                  <li data-nav-id="/docs/guides/tul/diverse/" class="dd-item">
                    <a href="/docs/guides/tul/diverse/"><span>Diverse</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                    <ul>
                      <li data-nav-id="/docs/guides/tul/diverse/administrators-oppgaver/" class="dd-item">
                        <a href="/docs/guides/tul/diverse/administrators-oppgaver/"><span>Administrators oppgaver</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/diverse/begrepsliste/" class="dd-item">
                        <a href="/docs/guides/tul/diverse/begrepsliste/"><span>Begrepsliste</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/diverse/ekstern-stil/" class="dd-item">
                        <a href="/docs/guides/tul/diverse/ekstern-stil/"><span>Ekstern stil</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/diverse/enhetstest/" class="dd-item">
                        <a href="/docs/guides/tul/diverse/enhetstest/"><span>Enhetstest</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/diverse/sletting/" class="dd-item">
                        <a href="/docs/guides/tul/diverse/sletting/"><span>Slette tjeneste og utgave</span></a>
                      </li>
                    </ul>
                  </li>

                  <li data-nav-id="/docs/guides/tul/vedlegg/" class="dd-item parent">
                    <a href="/docs/guides/tul/vedlegg/"><span>Vedlegg</span> <i class="fa fa-angle-down fa-lg category-icon"></i></a>
                    <ul>
                      <li data-nav-id="/docs/guides/tul/vedlegg/a/" class="dd-item active">
                        <a href="/docs/guides/tul/vedlegg/a/"><span>A: Skjemautvikling i InfoPath</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/vedlegg/b/" class="dd-item">
                        <a href="/docs/guides/tul/vedlegg/b/"><span>B: Utforming av brukergrensesnitt for skjema</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/vedlegg/c/" class="dd-item">
                        <a href="/docs/guides/tul/vedlegg/c/"><span>C: Utforming av brukervennlige tjenester</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/vedlegg/d/" class="dd-item">
                        <a href="/docs/guides/tul/vedlegg/d/"><span>D: InfoPath kodestandard</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/vedlegg/e/" class="dd-item">
                        <a href="/docs/guides/tul/vedlegg/e/"><span>E: InfoPath navnestandard</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/vedlegg/f/" class="dd-item">
                        <a href="/docs/guides/tul/vedlegg/f/"><span>F: Bruk av Visual Studio</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/vedlegg/g/" class="dd-item">
                        <a href="/docs/guides/tul/vedlegg/g/"><span>G: Web Service-oppslag fra InfoPath</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/tul/vedlegg/mappere/" class="dd-item">
                        <a href="/docs/guides/tul/vedlegg/mappere/"><span>Mappere</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                        <ul>
                          <li data-nav-id="/docs/guides/tul/vedlegg/mappere/generelt/" class="dd-item">
                            <a href="/docs/guides/tul/vedlegg/mappere/generelt/"><span>Generelt</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/tul/vedlegg/mappere/teknologi/" class="dd-item">
                            <a href="/docs/guides/tul/vedlegg/mappere/teknologi/"><span>Teknologi</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/tul/vedlegg/mappere/utvikling/" class="dd-item">
                            <a href="/docs/guides/tul/vedlegg/mappere/utvikling/"><span>Utvikling</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/tul/vedlegg/mappere/testing/" class="dd-item">
                            <a href="/docs/guides/tul/vedlegg/mappere/testing/"><span>Testing</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/tul/vedlegg/mappere/installasjon/" class="dd-item">
                            <a href="/docs/guides/tul/vedlegg/mappere/installasjon/"><span>Installasjon</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/tul/vedlegg/mappere/diverse/" class="dd-item">
                            <a href="/docs/guides/tul/vedlegg/mappere/diverse/"><span>Diverse</span></a>
                          </li>
                        </ul>
                      </li>

                      <li data-nav-id="/docs/guides/tul/vedlegg/regelmotor/" class="dd-item">
                        <a href="/docs/guides/tul/vedlegg/regelmotor/"><span>Regelmotor</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                        <ul>
                          <li data-nav-id="/docs/guides/tul/vedlegg/regelmotor/innledning/" class="dd-item">
                            <a href="/docs/guides/tul/vedlegg/regelmotor/innledning/"><span>Innledning</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/tul/vedlegg/regelmotor/regler/" class="dd-item">
                            <a href="/docs/guides/tul/vedlegg/regelmotor/regler/"><span>Regler</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/tul/vedlegg/regelmotor/betingelser/" class="dd-item">
                            <a href="/docs/guides/tul/vedlegg/regelmotor/betingelser/"><span>Betingelser</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/tul/vedlegg/regelmotor/utvidede-beskrivelser/" class="dd-item">
                            <a href="/docs/guides/tul/vedlegg/regelmotor/utvidede-beskrivelser/"><span>Utvidede beskrivelser</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/tul/vedlegg/regelmotor/eksempler/" class="dd-item">
                            <a href="/docs/guides/tul/vedlegg/regelmotor/eksempler/"><span>Eksempler</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/tul/vedlegg/regelmotor/innf%C3%B8ring-i-xml/" class="dd-item">
                            <a href="/docs/guides/tul/vedlegg/regelmotor/innf%C3%B8ring-i-xml/"><span>Innføring i xml</span></a>
                          </li>

                          <li data-nav-id="/docs/guides/tul/vedlegg/regelmotor/xsd/" class="dd-item">
                            <a href="/docs/guides/tul/vedlegg/regelmotor/xsd/"><span>Regelmotor.xsd</span></a>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li data-nav-id="/docs/guides/samtykke/" class="dd-item">
                <a href="/docs/guides/samtykke/"><span>Samtykke</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                <ul>
                  <li data-nav-id="/docs/guides/samtykke/sluttbruker/" class="dd-item">
                    <a href="/docs/guides/samtykke/sluttbruker/"><span>For sluttbruker</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                    <ul>
                      <li data-nav-id="/docs/guides/samtykke/sluttbruker/innlogging/" class="dd-item">
                        <a href="/docs/guides/samtykke/sluttbruker/innlogging/"><span>Innlogging</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/samtykke/sluttbruker/samtykkesiden/" class="dd-item">
                        <a href="/docs/guides/samtykke/sluttbruker/samtykkesiden/"><span>Samtykkesiden</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/samtykke/sluttbruker/oversikt-samtykker/" class="dd-item">
                        <a href="/docs/guides/samtykke/sluttbruker/oversikt-samtykker/"><span>Oversikt samtykker</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/samtykke/sluttbruker/trekke-samtykke/" class="dd-item">
                        <a href="/docs/guides/samtykke/sluttbruker/trekke-samtykke/"><span>Trekke samtykke</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/samtykke/sluttbruker/aktivitetslogg/" class="dd-item">
                        <a href="/docs/guides/samtykke/sluttbruker/aktivitetslogg/"><span>Aktivitetslogg</span></a>
                      </li>
                    </ul>
                  </li>

                  <li data-nav-id="/docs/guides/samtykke/datakilde/" class="dd-item">
                    <a href="/docs/guides/samtykke/datakilde/"><span>For datakilde</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                    <ul>
                      <li data-nav-id="/docs/guides/samtykke/datakilde/opprett-tjeneste/" class="dd-item">
                        <a href="/docs/guides/samtykke/datakilde/opprett-tjeneste/"><span>Opprette tjeneste</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/samtykke/datakilde/autorisere-datakonsument/" class="dd-item">
                        <a href="/docs/guides/samtykke/datakilde/autorisere-datakonsument/"><span>Autorisere datakonsument</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/samtykke/datakilde/bruk-av-token/" class="dd-item">
                        <a href="/docs/guides/samtykke/datakilde/bruk-av-token/"><span>Informasjon om token</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/samtykke/datakilde/test-tjeneste/" class="dd-item">
                        <a href="/docs/guides/samtykke/datakilde/test-tjeneste/"><span>Test av tjeneste</span></a>
                      </li>
                    </ul>
                  </li>

                  <li data-nav-id="/docs/guides/samtykke/datakonsument/" class="dd-item">
                    <a href="/docs/guides/samtykke/datakonsument/"><span>For datakonsument</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                    <ul>
                      <li data-nav-id="/docs/guides/samtykke/datakonsument/komme-i-gang/" class="dd-item">
                        <a href="/docs/guides/samtykke/datakonsument/komme-i-gang/"><span>Komme i gang</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/samtykke/datakonsument/be-om-samtykke/" class="dd-item">
                        <a href="/docs/guides/samtykke/datakonsument/be-om-samtykke/"><span>Be om samtykke</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/samtykke/datakonsument/hente-token/" class="dd-item">
                        <a href="/docs/guides/samtykke/datakonsument/hente-token/"><span>Hente token</span></a>
                      </li>

                      <li data-nav-id="/docs/guides/samtykke/datakonsument/test-tjeneste/" class="dd-item">
                        <a href="/docs/guides/samtykke/datakonsument/test-tjeneste/"><span>Test av samtykke</span></a>
                      </li>
                    </ul>
                  </li>

                  <li data-nav-id="/docs/guides/samtykke/begrepsliste/" class="dd-item">
                    <a href="/docs/guides/samtykke/begrepsliste/"><span>Begrepsliste</span></a>
                  </li>
                </ul>
              </li>

              <li data-nav-id="/docs/guides/digital-post-til-virksomheter/" class="dd-item">
                <a href="/docs/guides/digital-post-til-virksomheter/"><span>Digital Post til Virksomheter</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                <ul>
                  <li data-nav-id="/docs/guides/digital-post-til-virksomheter/sp%C3%B8rsm%C3%A5l-og-svar/" class="dd-item">
                    <a href="/docs/guides/digital-post-til-virksomheter/sp%C3%B8rsm%C3%A5l-og-svar/"><span>Spørsmål og svar om DPV</span></a>
                  </li>
                </ul>
              </li>

              <li data-nav-id="/docs/guides/autorisasjon/" class="dd-item">
                <a href="/docs/guides/autorisasjon/"><span>Autorisasjon</span></a>
              </li>
            </ul>
          </li>

          <li data-nav-id="/docs/altinncore/" class="dd-item">
            <a href="/docs/altinncore/"><span>Tjenester 3.0</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
            <ul>
              <li data-nav-id="/docs/altinncore/goals/" class="dd-item">
                <a href="/docs/altinncore/goals/"><span>Målsettinger</span></a>
              </li>

              <li data-nav-id="/docs/altinncore/status/" class="dd-item">
                <a href="/docs/altinncore/status/"><span>Status</span></a>
              </li>

              <li data-nav-id="/docs/altinncore/satsingsforslag/" class="dd-item">
                <a href="/docs/altinncore/satsingsforslag/"><span>Satsingsforslag 2018</span></a>
              </li>

              <li data-nav-id="/docs/altinncore/architecture/" class="dd-item">
                <a href="/docs/altinncore/architecture/"><span>Arkitektur</span></a>
              </li>

              <li data-nav-id="/docs/altinncore/faq/" class="dd-item">
                <a href="/docs/altinncore/faq/"><span>FAQ</span></a>
              </li>

              <li data-nav-id="/docs/altinncore/slide/" class="dd-item">
                <a href="/docs/altinncore/slide/"><span>Slide</span></a>
              </li>
            </ul>
          </li>

          <li data-nav-id="/docs/releases/" class="dd-item">
            <a href="/docs/releases/"><span>Endringslogg</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
            <ul>
              <li data-nav-id="/docs/releases/2017/" class="dd-item">
                <a href="/docs/releases/2017/"><span>2017</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                <ul>
                  <li data-nav-id="/docs/releases/2017/17-3/" class="dd-item">
                    <a href="/docs/releases/2017/17-3/"><span>17.3</span></a>
                  </li>

                  <li data-nav-id="/docs/releases/2017/17-2/" class="dd-item">
                    <a href="/docs/releases/2017/17-2/"><span>17.2</span></a>
                  </li>

                  <li data-nav-id="/docs/releases/2017/17-1-1/" class="dd-item">
                    <a href="/docs/releases/2017/17-1-1/"><span>17.1.1</span></a>
                  </li>

                  <li data-nav-id="/docs/releases/2017/etablering/" class="dd-item">
                    <a href="/docs/releases/2017/etablering/"><span>Etablering</span></a>
                  </li>

                  <li data-nav-id="/docs/releases/2017/17-1/" class="dd-item">
                    <a href="/docs/releases/2017/17-1/"><span>17.1</span></a>
                  </li>
                </ul>
              </li>

              <li data-nav-id="/docs/releases/2016/" class="dd-item">
                <a href="/docs/releases/2016/"><span>2016</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                <ul>
                  <li data-nav-id="/docs/releases/2016/16-1/" class="dd-item">
                    <a href="/docs/releases/2016/16-1/"><span>16.1</span></a>
                  </li>
                </ul>
              </li>

              <li data-nav-id="/docs/releases/2015/" class="dd-item">
                <a href="/docs/releases/2015/"><span>2015</span> <i class="fa fa-angle-right fa-lg category-icon"></i></a>
                <ul>
                  <li data-nav-id="/docs/releases/2015/15-3/" class="dd-item">
                    <a href="/docs/releases/2015/15-3/"><span>15.3</span></a>
                  </li>

                  <li data-nav-id="/docs/releases/2015/15-2/" class="dd-item">
                    <a href="/docs/releases/2015/15-2/"><span>15.2</span></a>
                  </li>

                  <li data-nav-id="/docs/releases/2015/15-1/" class="dd-item">
                    <a href="/docs/releases/2015/15-1/"><span>15.1</span></a>
                  </li>
                </ul>
              </li>
            </ul>
          </li>

          <li class="" role="">
            <h3>
              Lenker
            </h3>
            <a href="https://altinn.github.io/DesignSystem"><i class='fa fa-fw fa-star'></i> Designsystem</a>
          </li>

          <li class="" role="">
            <a href="https://altinnett.brreg.no/"><i class='fa fa-fw fa-info-circle'></i> Altinnett</a>
          </li>

          <li class="" role="">
            <a href="/docs/credits"><i class='fa fa-fw fa-bullhorn'></i> Kred</a>
          </li>

          <li class="" role="">
            <a href="https://github.com/altinn/docs"><i class='fa fa-fw fa-github'></i> GitHub</a>
          </li>
        </ul>

        <section id="footer">
        </section>
      </div>
    </nav>

    <section id="body">
      <div id="overlay">
      </div>

      <div class="padding highlightable">
        <div id="top-bar">
          <div id="top-github-link">
            <a class="github-link" href="https://github.com/altinn/docs/blob/master/content/guides/tul/vedlegg/a.md" target="blank"><i class="fa fa-code-fork"></i> Endre</a>
          </div>

          <div id="breadcrumbs" itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
            <span id="sidebar-toggle-span"><a href="#" id="sidebar-toggle" data-sidebar-toggle=""><i class="fa fa-bars"></i></a></span> <span id="toc-menu"><i class="fa fa-list-alt"></i></span> <span class="links"><a href='/docs/'>Altinn docs</a> / <a href='/docs/guides/'>Guider</a> / <a href='/docs/guides/tul/'>TUL</a> / <a href='/docs/guides/tul/vedlegg/'>Vedlegg</a> / A: Skjemautvikling i InfoPath</span>
          </div>

          <div class="progress">
            <div class="wrapper">
              <nav id="TableOfContents">
                <ul>
                  <li>
                    <ul>
                      <li>
                        <a href="#f%C3%B8r-oppstart-av-infopath">Før oppstart av InfoPath</a>
                      </li>

                      <li>
                        <a href="#altinn-definerte-inputfelt">Altinn-definerte inputfelt</a>
                      </li>

                      <li>
                        <a href="#oppstart-av-infopath-import-av-xsd-fil-og-generell-oppsett-av-skjema-og-layout">Oppstart av InfoPath, Import av XSD-fil og generell oppsett av skjema og layout</a>
                      </li>

                      <li>
                        <a href="#alternativer-for-skjema">Alternativer for skjema</a>
                      </li>

                      <li>
                        <a href="#oppdatering-av-hoved-datakilde">Oppdatering av (hoved)datakilde</a>
                      </li>

                      <li>
                        <a href="#definisjon-av-sider-i-infopath-skjema-views">Definisjon av sider i InfoPath skjema (Views)</a>
                      </li>

                      <li>
                        <a href="#innlegging-av-felt-fra-datakilde-fra-xsd">Innlegging av felt fra Datakilde (fra XSD)</a>
                      </li>

                      <li>
                        <a href="#kalkyler-eksempel-p%C3%A5-repeterende-gruppe-og-radioknapper">Kalkyler, eksempel på repeterende gruppe og radioknapper</a>
                      </li>

                      <li>
                        <a href="#valideringer">Valideringer</a>
                        <ul>
                          <li>
                            <a href="#avansert-eksempel-p%C3%A5-validering">Avansert eksempel på validering</a>
                          </li>

                          <li>
                            <a href="#pattern-validering">Pattern validering</a>
                          </li>

                          <li>
                            <a href="#validering-fra-vsta-c-kode">Validering fra VSTA / C#-kode</a>
                          </li>
                        </ul>
                      </li>

                      <li>
                        <a href="#dynamikk">Dynamikk</a>
                        <ul>
                          <li>
                            <a href="#avansert-eksempel-p%C3%A5-dynamikk">Avansert eksempel på dynamikk</a>
                          </li>
                        </ul>
                      </li>

                      <li>
                        <a href="#ressursfiler-og-tekstfiler">Ressursfiler og tekstfiler</a>
                      </li>

                      <li>
                        <a href="#hjelpefelter-verdioverf%C3%B8ringer">Hjelpefelter, verdioverføringer</a>
                        <ul>
                          <li>
                            <a href="#verdioverf%C3%B8ringer">Verdioverføringer</a>
                          </li>
                        </ul>
                      </li>

                      <li>
                        <a href="#web-print-og-kvitteringssider">Web-, print- og kvitteringssider</a>
                      </li>

                      <li>
                        <a href="#hjelpetekster-knapper">Hjelpetekster (knapper)</a>
                      </li>

                      <li>
                        <a href="#sporvalg">Sporvalg</a>
                      </li>

                      <li>
                        <a href="#innlegging-av-kode-i-et-skjema">Innlegging av kode i et skjema</a>
                      </li>

                      <li>
                        <a href="#forh%C3%A5ndsvisning-og-enhetstest-i-infopath">Forhåndsvisning og enhetstest i InfoPath</a>
                      </li>

                      <li>
                        <a href="#fargekoder-altinn">Fargekoder Altinn</a>
                      </li>
                    </ul>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>

        <div id="body-inner">
          <h1>
            A: Skjemautvikling i InfoPath
          </h1>

          <p>
            Dette vedlegget tar for seg hvordan man stegvis utvikler et Altinn-skjema / innsendingstjeneste i InfoPath. For informasjon om mer generell InfoPath funksjonalitet, henvises til standard dokumentasjon for Microsoft InfoPath. Denne kan bl.a. finnes ved hjelp av hjelp-funksjonen (trykk F1) i InfoPath eller på <a href="http://office.microsoft.com/nb-no/infopath/default.aspx">http://office.microsoft.com/nb-no/infopath/default.aspx</a>
          </p>

          <p>
            Det forventes at den som skal bruke dette dokumentet har bakgrunn fra bruk av dataverktøy og helst også fra programmering. Kjennskap til hva en XSD er, og hvor den kommer fra er en betingelse for å utvikle skjemaer. Som en tommelfingerregel, er det anbefalt at alle skjema bygges på en XSD, og det er XSD’en som angir hvilke felter som skjemaet skal bestå av. Samme XSD vil også bli benyttet senere for validering av skjema ved innsending av sluttbruker.
          </p>

          <p>
            Videre for de som skal programmere, forlanges kompetanse i bruk av Visual Studio.
          </p>

          <h2 id="før-oppstart-av-infopath">
            Før oppstart av InfoPath
          </h2>

          <p>
            I eksemplet beskrevet i dette dokumentet, skal det lages utvalgte deler av skjema RF-1189 og RF-1113.
          </p>

          <p>
            Først bør det lages en egen katalog for lagring av filer knyttet til utvikling av skjemaet. Det skal her benyttes TUL-share. P.t. er det <code>\\alt-tul-db-c02\tulshare\Infopath\etater</code> og hvilken tjenesteeier man utvikler for. Det bør lages én katalog pr. utgave.
          </p>

          <p>
            På denne katalogen bør også datakilde (XSD) lagres. XSD kan hentes fra SERES før et skjema kan utvikles i InfoPath (inneholder definisjon av hvilke felt som skal være med i skjema). Det er også mulig å lage XSD selv, eller lage XSD på bakgrunn av InfoPato-skjemaet i InfoPath.
          </p>

          <h2 id="altinn-definerte-inputfelt">
            Altinn-definerte inputfelt
          </h2>

          <p>
            Ut av boksen lar ikke InfoPath deg benytte egendefinerte inputfelter i en repeterende gruppe. Dette er ønsket løst uten at hjelpefeltene må legges til i skjemaets opprinnelige datakilde, i tidligere løsning omtalt som OR-spesifikasjon.
          </p>

          <p>
            For å løse dette problemet må man benytte et <em>Altinn-definert</em> input felt. Et altinn-definert felt er et felt som er definert i en egen datakilde, hvor datakilden enten er importert til eller refererer til hoveddatakilden. Dette gjøres ved å først lage datakilden hvor hjelpefeltene skal ligge. Disse vil da ligge i et eget navnerom (namespace). Dette navnerommet må begynne med altinn i alle tilfeller.
          </p>

          <p>
            Videre følger et eksempel på bruk av Altinn-definerte inputfelt i RF-1037. RF-1037 inneholder en tabell for arbeidsgiveravgift hvor bruker skal velge en komunne fra en nedtrekksliste, hvorpå arbeidsgiveravgiftsone og komunnenummer skal vises automatisk. For å få dette til, må man velge å legge arbeidsgiveravgiftsone og en radindeks (som ikke vises i skjema) i altinn-navnerommet. Dermed må man definere disse to feltene i en egen datakilde, <em>altinn_namespace.xsd</em>:
          </p>

          <pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:or="http://www.brreg.no/or" 
xmlns="http://www.brreg.no/seres" xmlns:altinn="www.altinn.no/infopath-extensions" targetNamespace="www.altinn.no/infopath-extensions" elementFormDefault="qualified" attributeFormDefault="unqualified"&gt;
  &lt;xs:element name="AltinnField_kommunenavn_grp_4953" type="xs:string"/&gt;
  &lt;xs:element name="AltinnField_sone_grp_4953" type="xs:string"/&gt;
  &lt;xs:element name="AltinnField_rowindex_grp_4953" type="xs:string"/&gt;
&lt;/xs:schema&gt;
</code></pre>
          <p>
            Som man ser over er det angitt tre felter i altinn-datakilden. Nå må man i hovedkilden angi at denne datakilden skal kunne benyttes. Dette gjøres ved å inkludere en import-statement i toppen av datakilden:
          </p>

          <pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
&lt;xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:brreg="http://www.brreg.no/or" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:altinn="www.altinn.no/infopath-extensions"&gt;  

&lt;xs:import namespace="www.altinn.no/infopath-extensions" schemaLocation="altinn_namespace.xsd"/&gt;
</code></pre>
          <p>
            Merk at begge datakildene må ligge i samme katalog slik at InfoPath finner de.
          </p>

          <p>
            Videre må man så i hoveddatakilden legge til de feltene man vil benytte fra altinn-navnerommet:
          </p>

          <pre><code class="language-xml">&lt;xs:element name="TabellArbeidsgiveravgift-grp-4953"&gt;
  &lt;xs:complexType&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element minOccurs="0" ref="AvgiftsbetalerOrganisasjonsnummer-datadef-27605"/&gt;
      &lt;xs:element minOccurs="0" ref="KommuneNummer-datadef-5950"/&gt;
      &lt;xs:element minOccurs="0" ref="ArbeidsgiveravgiftGrunnlagSpesifisert-datadef-27607"/&gt;
      &lt;xs:element minOccurs="0" ref="RefusjonGrunnlagSpesifisert-datadef-27608"/&gt;
      &lt;xs:element minOccurs="0" ref="PensjonPremieTilskuddSpesifisert-datadef-27611"/&gt;
      &lt;xs:element minOccurs="0" ref="altinn:AltinnField_kommunenavn_grp_4953"/&gt;
      &lt;xs:element minOccurs="0" ref="altinn:AltinnField_sone_grp_4953"/&gt;
      &lt;xs:element minOccurs="0" ref="altinn:AltinnField_rowindex_grp_4953"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute fixed="4953" name="gruppeid" type="xs:positiveInteger" use="required"/&gt;
  &lt;/xs:complexType&gt;
&lt;/xs:element&gt;
</code></pre>
          <p>
            Som vist over er det lagt til tre altinn-definerte felter i gruppen <code>TabellArbeidsgiveravgift-grp-4953</code>. Merk at disse tre nye feltene er prefixet med navnerommet <code>altinn</code>. Disse feltene vil da vises i InfoPath etter at datakilden (XSD) er importert.
          </p>

          <p>
            Se også beskrivelse av <a href="../../tjenestetyper/innsending/#skjemasett">skjemasett</a>.
          </p>

          <p>
            Dermed kan de ”nye” feltene fritt benyttes hvor som helst i skjema, og i motsetning til vanlig egendefinerte hjelpefelter som man oppretter direkte i InfoPath (typisk my:felter), kan disse feltene også benyttes i repeterende grupper. Merk at altinn-definerte felter <em>ikke</em> sendes med til tjenesteier.
          </p>

          <p>
            I og med at dette er vanlig tekst, kan f.eks. Notepad++ benyttes som editeringsverktøy.
          </p>

          <h2 id="oppstart-av-infopath-import-av-xsd-fil-og-generell-oppsett-av-skjema-og-layout">
            Oppstart av InfoPath, Import av XSD-fil og generell oppsett av skjema og layout
          </h2>

          <p>
            Start InfoPath, og velg ”<em>Ny”</em> fra <em>Fil</em>-menyen. Følgende skjermbildet vil vises.
          </p>

          <figure>
            <img src="/docs/images/guides/tul/utform-skjemamal.png?width=700">
            <figcaption>
              <h4>
                Figur 143 – InfoPath, utform skjemamal
              </h4>
            </figcaption>
          </figure>

          <p>
            Dobbelklikk på ikonet ”<em>XML eller XML-skjema”</em>. I neste skjermbilde angis navnet på datakilden (XSD) som skal benyttes, og velg å ikke benytte flere datakilder. <em>Fullfør</em>. Husk å benytte den rettede datakilden hvis den kommer fra brreg. Skjemaet er nå klart til utvikles videre.
          </p>

          <figure>
            <img src="/docs/images/guides/tul/oversikt-datakilde.png?width=700">
            <figcaption>
              <h4>
                Figur 144 – Oversikt over alle grupper/felter som finnes i datakilden
              </h4>
            </figcaption>
          </figure>

          <p>
            Som vist i figuren over, er det på høyre side i InfoPath en oversikt over alle grupper/felter som finnes i datakilden. På venstre side er det et tomt område, hvor skjema skal bygges. Hit skal sidemal fra tjenesteier kopieres til på følgende vis:
          </p>

          <ul>
            <li>I Windows Utforsker, høyreklikk ”sidemal_skd-pmh2009-05-18.xsn” (gjelder for SKD, for andre etater kan man bruke andre maler med andre navn) og velg ”Design” fra meny. Klikk “OK” på evt feilmelding som dukker opp.
            </li>

            <li>Kopier hele sidemal over i i det nye skjema (skjermbilde ovenfor) vha standard kopier/lim inn (eksempel Ctrl-A, Ctrl-C og Ctrl-V (i nytt skjema)):
            </li>
          </ul>

          <p>
            En sidemal lages som et normalt InfoPath-skjema <em>uten</em> datakilde og kan benyttes som grunnlag for nye skjemaer. En sidemal bør kun inneholde et absolutt minimum av funksjonalitet, og heller fokusere på riktig bakgrunnsfarge, skrifttyper, størrelser, logoer osv. Det anbefales at alle elementer som for eksempel uttrykksbokser, tekstbokser, ikon o.l bør legges inn i egne tabeller slik at elementene blir ”låst fast” i skjemaet som vist på figur under. Elementene i skjemaet vil da bli riktig posisjonert uavhengig av nettlesere som blir bruk i portalen. På denne måten sikrer man en konform layout innenfor en tjenesteeier.
          </p>

          <p>
            Se også <a href="#oppdatering-av-hoved-datakilde">oppdatering av datakilde</a> for å bytte ut datakilde i et ekstisterende skjema.<br>
            Det anbefales forøvrig at sidemalen lagres på arbeidsflate for tjenesteeier.
          </p>

          <p>
            For at skjemaet ikke skal få horisontal scroll i SBL, er det viktig at bredden ikke overstiger <strong>630px.</strong> Denne bredden tar da høyde for bredden på en evt. vertikal scrollbar, og det anbefales at det tas høyde for dette uansett om siden forventer vertikal scroll eller ikke.
          </p>

          <figure>
            <img src="/docs/images/guides/tul/sidemal.png?width=700">
            <figcaption>
              <h4>
                Figur 145 – Sidemal
              </h4>
            </figcaption>
          </figure>

          <p>
            Tilpass bilde til mal for det aktuelle skjema ved å evt fjerne felter og ledetekster. Marker felter og ledetekst samt tekstene ”Skjematittel” og ”Framskutt ledetekst”, og trykk ”Slett”.
          </p>

          <p>
            Legg inn ny tekst for skjemaet. Alle tekster skal defineres i <em>beregnet verdi kontroller</em>. Velges fra ” kontroller” under menylinjen <em>Hjem</em>.
          </p>

          <figure>
            <img src="/docs/images/guides/tul/uttrykksboks.png">
            <figcaption>
              <h4>
                Figur 146 – InfoPath, uttrykksboks
              </h4>
            </figcaption>
          </figure>

          <p>
            Legg inn tittelen på utgaven i hermeteng (”RF-1189 Årsoppgjør for utleie mv. fast eiendom 2008”). Se også <a href="#fargekoder-altinn">fargekoder Altinn</a>. (foreløpig utgave pr 2009-05-18) for definering av riktig fargekode, font og størrelse for teksten. Dermed har vi en sidemal for kopiering til øvrige sider i skjemaet ved og opprette sider og bruker utklippstavlefunksjonalitet.
          </p>

          <h2 id="alternativer-for-skjema">
            Alternativer for skjema
          </h2>

          <p>
            Før man laster opp Infopath skjema i TUL er det noen viktige innstillinger som må settes ellers vil man få problemer når man skal migrere skjema. Man må gå inn på «Fil» på menylinjen og velg «alternativer for skjema». Gå deretter inn på «Sikkerhet og klarering» og velg <em>fullstendig klarering</em>
          </p>

          <figure>
            <img src="/docs/images/guides/tul/alternativer-for-skjema.png?width=700">
            <figcaption>
              <h4>
                Figur 147 –InfoPath, Alternativer for skjema, sikkerhet og klarering
              </h4>
            </figcaption>
          </figure>

          <p>
            Deretter må man gå inn på kompatibilitet i kategorien under alternativ for skjema. Velg <em>webleserskjema</em> som skjematype.
          </p>

          <p>
            Hvis man skal bruke C# kode i skjemaet sitt så må man også huske på å angi programmeringsspråk og plassering av prosjektkoden. Da går man inn på «programmering» under kategorien, velger C# som kodespråk og angir stien til en egen mappe under TUL share (G:)
          </p>

          <figure>
            <img src="/docs/images/guides/tul/programmeringsspr%c3%a5k.png?width=700">
            <figcaption>
              <h4>
                Figur 148 – InfoPath, Alternativer for skjema: programmeringsspråk
              </h4>
            </figcaption>
          </figure>

          <h2 id="oppdatering-av-hoved-datakilde">
            Oppdatering av (hoved)datakilde
          </h2>

          <p>
            Det kan i enkelte tilfeller være ønskelig å bytte ut hoveddatakilden med en ny, hvis for
          </p>

          <p>
            eksempel det har tilkommet nye felter osv. Dette gjøres ved å velge ”Oppdater felt” under ”Data” på menylinjen . Du velger da den nye XSD’en og angir at du ikke skal benytte flere kilder. Deretter er det viktig at man kjører ”Regelinspeksjon” fra samme Data-menylinje. Grunnen til dette er at felter som eksisterte i den gamle datakilden, men er fjernet fra den, nye kan være benyttet i xPath-uttrykk. Dette må rettes opp før utgaven kan migreres.
          </p>

          <h2 id="definisjon-av-sider-i-infopath-skjema-views">
            Definisjon av sider i InfoPath skjema (Views)
          </h2>

          <p>
            Under menylinjen Sideutforming. ”Visning 1” vises som default. Visning betegner side i skjema. Velg ”<em>Ny visning”</em> og skriv navn. Man bør definere beskrivende sidenavn for hver visning/side i InfoPath. Dette er ikke nødvendig, ettersom sidensidenavn og rekkefølge må oppgis i TUL. Men det anbefales å gi navn med løpenummeret slik at sidene kan sees i riktig rekkefølge i InfoPath under utvikling. VITKIG: Sidenavn kan ikke inneholde spesialtegn eller nasjonale tegn.
          </p>

          <p>
            Fra Visning 1 kopieres det oppsettet man lagde (Ctrl A, Ctrl C) og limes inn på alle sider som skal finnes i skjema.
          </p>

          <h2 id="innlegging-av-felt-fra-datakilde-fra-xsd">
            Innlegging av felt fra Datakilde (fra XSD)
          </h2>

          <p>
            Velg side 1 (Visning 1) og bytt til <em>Datakilde</em>. Legg til <em>Uttrykksbokser</em> for tekstene ”Innledning” og ”Avgiver” som vist under. Husk å sjekke fonter, farger etc. i henhold til sidemal.
          </p>

          <p>
            Velg gruppe som skal være på denne siden, ved å markere ”Avgiver-grp-231” under ”GenerellInformasjon-grp-959”, som vist i eksemplet under. Dra den fra Datakilde til punktet under overskriftslinje i skjema og velg <em>Kontroller i oppsettstabell</em> fra popup meny (merk at man ikke kan velge hele siden – dvs gruppe med undergrupper, man må velge gruppe som kun inneholder orid’er. Er det flere slike grupper på side, må alle dras inn på siden enkeltvis).
          </p>

          <p>
            Det er også mulig å dra inn enkeltfelter ved å ikke markere hele gruppen, men markere enkeltfelter i datakilden.
          </p>

          <figure>
            <img src="/docs/images/guides/tul/innlegging-av-felt-fra-datakilde.png?width=700">
            <figcaption>
              <h4>
                Figur 149 – Innlegging av felt fra datakilde
              </h4>
            </figcaption>
          </figure>

          <p>
            Linje med ”Gruppeid” skal ikke vises, og fjernes ved å markere linjen, høyreklikke og velge ”<em>Slett rader”</em>. Erstatt alle ledetekster i layouttabellen med <em>Uttrykksbokser</em> og tekster som vist i eksempel under, i henhold til standard font/farge. Vær nøye med riktig ledetekst til riktig felt. For å skape ”litt luft” i venstre kant av layout tabellen, anbefales det å legge inn en smal kolonne til venstre. Dette kan gjøres ved markere tabellen, høyreklikke, og velge <em>Sett inn -&gt; Kolonne til venstre</em> fra popup. Denne vil være del av tabellen og det er tabellen som må få riktig avstand til venstre marg.
          </p>

          <p>
            Sett bakgrunnsfarge på grupperammen (layout tabellen), ved å markere gruppen, høyreklikk og velge <em>Kantlinjer og skygger</em>. Velg flipp <em>Skygger</em> og sett riktig farge (ref avsnitt <em>Fargekoder Altinn).</em>
          </p>

          <p>
            Feltene for fødselsnummer og organisasjonsnummer skal være skrivebeskyttet og ha bakgrunnsfarge for skrivebeskyttet felt. Marker felt og velg bakgrunnsfarge fra verktøylinja. For å skrivebeskytte felt, dobbeltklikk på feltet, og <em>Egenskaper for tekstboks</em> vises. Grunnen er at disse feltene skal preutfylles i sluttbrukerløsningen, og vil derfor inneha korrekt data iht folkeregisteret eller enhetsregisteret, og skal dermed ikke kunne endres av utfyller.
          </p>

          <p>
            Velg flipp <em>Visning</em> og marker <em>Skrivebeskyttet:</em>
          </p>

          <figure>
            <img src="/docs/images/guides/tul/infopath-tekstboks.png">
            <figcaption>
              <h4>
                Figur 150 – InfoPath, tekstboks
              </h4>
            </figcaption>
          </figure>

          <p>
            Sett riktig størrelse på feltet i forhold til antall tegn, ved å velge flipp <em>Størrelse</em>, velg riktig enhet og bredde:
          </p>

          <figure>
            <img src="/docs/images/guides/tul/infopath-tekstboks-st%c3%b8rrelse.png">
            <figcaption>
              <h4>
                Figur 151 – InfoPath, tekstboks, størrelse
              </h4>
            </figcaption>
          </figure>

          <p>
            Hvis det ikke er et vanlig tekstfelt man ønsker, men en annen type kontroll (radioknapp, nedtrekksliste osv) skal man høyreklikke på feltet <em>Endre til</em> -&gt; og velge ønsket kontroll type:
          </p>

          <p>
            Ved å høyreklikke på feltet og velge egenskaper kan man velge forskjellige innstillinger som: <em>skrivebeskyttet</em>, max antall tegn i feltet, justering på innholdet, formatet på numerisk felt osv.
          </p>

          <p>
            For å kunne tabulere i riktig rekkefølge, må man velge avanserte egenskaper og sette ønsket tabulatorindeks. Om feltet ikke skal være tabulerbart så skal tabulatorindeks settes til -1.
          </p>

          <h2 id="kalkyler-eksempel-på-repeterende-gruppe-og-radioknapper">
            Kalkyler, eksempel på repeterende gruppe og radioknapper
          </h2>

          <p>
            Siden som nå er laget inneholder ikke kalkyler. Det er derfor behov for å bygge en side til, for eksempel side 3 i RF-1189. Vha. ”Legg til visning …”-funksjonen nevnt ovenfor, vil vi kalle siden for ”View 3”. Denne inneholder også en repeterende gruppe (enten tabell for innlegging av flere rader eller seksjon som kan også legges inn flere ganger etter hverandre), knapp (ikon) for hjelpetekst, samt kontroller for radioknapp, nedtrekksliste og datovalg.
          </p>

          <figure>
            <img src="/docs/images/guides/tul/infopath-rf1189-visning3.png">
            <figcaption>
              <h4>
                Figur 152 – Skjema RF-1189. Visning 3.
              </h4>
            </figcaption>
          </figure>

          <p>
            I utgangspunktet benyttes samme fremgangsmåte som for første side i skjemaet. Ledetekster skal settes i hver sin uttrykksboks og feltene som skal benyttes finnes i datakilde under hovedgruppen ”InntekterUtleieverdi-grp-960”. Legg inn den repeterende gruppen for utleieinntekter ved å markere ”Utleie-grp-4939” i datakilden, og dra den inn på skjema. Du får nå 3 valg fra popupmeny, velg ”Gjentatt tabell” og følgende utgangspunkt for videre redigering vil vises:
          </p>

          <figure>
            <img src="/docs/images/guides/tul/infopath-gjentatt-tabell.png">
            <figcaption>
              <h4>
                Figur 153 - Gjentatt tabell
              </h4>
            </figcaption>
          </figure>

          <p>
            Hvis repeterende gruppe er veldig stor med lange overskrifter kan det være lurt å velge ”Gjentatt inndeling”, da vil feltene med tilhørende ledetekster bli plassert under hverandre.
          </p>

          <p>
            Slett kolonne for ”Gruppeid”, erstatt hver enkelt standard ledetekst med uttryksboks og ledetekst som vist i det ferdige sideeksempel. Husk også å tilpasse bredden slik at den passer med mal-bredden for skjema.
          </p>

          <p>
            Fortsett med gruppe for kårbolig (Kar-grp-4942), som legges inn med valg ”kontroller i layouttabell”. For de tre siste feltene i denne gruppen, må presentasjon endres til radioknapper. Høyreklikk på feltene, i popup-meny velges ”Endre til” og deretter ”Alternativknapp”. For hver av radioknappene vil det vises en ledetekst på høyre side. Disse må erstattes av de vanlige uttrykksboksene, en for hver tekst. Legg merke til at teksten som skal vises ikke alltid er helt identisk med den genererte fra datakilden (xsd).
          </p>

          <p>
            Til sist legges feltene for post 1.3 til post 1.5 inn. Disse feltene ligger i datakilden rett under hovedgruppen ”InntekterUtleieverdi-grp-960”, derfor er det denne som skal markeres som vist under:
          </p>

          <figure>
            <img src="/docs/images/guides/tul/infopath-rf1189-vining3-again.png">
            <figcaption>
              <h4>
                Figur 154 – RF-1189 visning 3
              </h4>
            </figcaption>
          </figure>

          <p>
            Før kalkylearbeidet kan starte, må feltet for post 1.5 ”Samlet bruttoinntekt” settes til skrivebeskyttet, og layouttabellen tilpasses med blanke kolonner for luft på venstre side, samt plass til å kunne sette inn hjelpeikon senere, som vist i det ferdige sideeksempelet, figur 152.
          </p>

          <p>
            Det skal nå legges inn en <strong>kalkyle</strong> i post 1.5, som skal summere ”Beløp” fra tabellen i post 1.1, samt postene 1.2, 1.3 og 1.4.
          </p>

          <p>
            Kalkylen skal dermed inneholde følgende elementer og orid’er:
          </p>

          <p>
            <em>:22033 = sum(:22014) + :22032 + :22101 + :22026</em>
          </p>

          <p>
            Eksempel skjermbildene for denne seansen vises samlet under teksten. Høyreklikke på orid :22033 (post 1.5 ”Samlet bruttoinntekt” ), velge ”Egenskaper for tekstboks” (1) og flipp ”Data”. Her vises ”Verdi”-feltet hvor kalkylen skal legges inn.
          </p>

          <p>
            Klikk videre på knappen ”fx” til venstre for ”Verdi”-feltet for å komme inn ”Sett inn formel” vinduet (2). Her kan en skrive inn kalkylen. Skriv inn funksjonsnavn og operatorer og velg felt som skal inngå vha. knappen ”Sett inn fellt eller gruppe …” (3). Funksjonsnavn med syntaks kan også velges vha. knappen ”Sett inn funksjon …”.
          </p>

          <p>
            Kalkylen skal se slik ut når den er ferdig, og inneholder en funksjon ”sum()” som summerer alle rader med angitt felt fra den repeterende gruppen i post 1.1:
          </p>

          <pre><code>sum(UtleieInntektSpesifisertEiendom-datadef-22014) +
VedlikeholdskostnaderMvLeietakere-datadef-22032 +
InntekterAndre-datadef-22101 +
sum(UtleieInntektSpesifisertEiendom-datadef-22014) +
EgenleieKarInntekt-datadef-22026
</code></pre>
          <p>
            Skjermbilder henvist til i beskrivelsen over:
          </p>

          <p>
          </p>

          <figure>
            <img src="/docs/images/guides/tul/sett-inn-formel-1.png">
            <figcaption>
              <h4>
                Figur 155a – Egenskaper tekstboks
              </h4>
            </figcaption>
          </figure>

          <figure>
            <img src="/docs/images/guides/tul/sett-inn-formel-2.png">
            <figcaption>
              <h4>
                Figur 155b – Sett inn formel
              </h4>
            </figcaption>
          </figure>

          <figure>
            <img src="/docs/images/guides/tul/sett-inn-formel-3.png">
            <figcaption>
              <h4>
                Figur 155c – Velg et felt eller en gruppe
              </h4>
            </figcaption>
          </figure>
          <p></p>
          <p>
            Merk at summeringsfeltet får verdi 0 hvis alle feltene som inngår i kalkyle er tomme. Om dette ikke er ønskelig kan det løses på 2 måter.
          </p>

          <p>
            En er med ”Regler …” funksjonen og en annen er ved å omskrive kalkylen.
          </p>

          <p>
            Hvis man benytter seg av ”Regler …” funksjonen må man være klar over at et stort antall regler for å tømme summeringsfelter i skjema, kan forårsake dårligere ytelse i skjema. Alternativet omskrivning av kalkyler er da aktuelt.
          </p>

          <p>
            ”Regler …” funksjonen:
          </p>

          <ul>
            <li>Høyreklikk på feltet for post 1.5 ”Samlet bruttoinntekt” og velg ”Regler …”
            </li>
          </ul>

          <figure>
            <img src="/docs/images/guides/tul/regler.png?width=700">
            <figcaption>
              <h4>
                Figur 156 – Regler
              </h4>
            </figcaption>
          </figure>

          <ul>
            <li>Her kan det legges inn regler tilknyttet feltet ved å trykke på “Ny”-knappen
            </li>
          </ul>

          <figure>
            <img src="/docs/images/guides/tul/regler-legg-til.png">
            <figcaption>
              <h4>
                Figur 157 – Regler, Legg til
              </h4>
            </figcaption>
          </figure>

          <ul>
            <li>Velg så “Angi verdien …” for å sette opp kriteriene:
            </li>
          </ul>

          <figure>
            <img src="/docs/images/guides/tul/angi-betingelse.png">
            <figcaption>
              <h4>
                Figur 158 – Angi betingelse
              </h4>
            </figcaption>
          </figure>

          <ul>
            <li>
              <p>
                Det første kriteriet er at selve summeringsfeltet skal ha verdi 0. Dette må settes eksplisitt som standardverdi i feltet man sjekker på. Velg deretter de feltene som inngår i kalkylen. For disse velges ”Er tomt”. Alle felt i kalkylen må være med, ellers risikeres at summeringsfeltet blir blanket ut selv om deler av kalkylen har verdi.
              </p>
            </li>

            <li>
              <p>
                Trykk OK for å returnere til forige vindu. Til sist må ”Legg til handlig …”-knappen benyttes fra ”Regler”-vinduet. Velg ”Angi verdien for et felt” som aksjon og så feltet som skal settes. ”Felt” vises som et punktum, siden der dette feltet det ble klikket på ved inngang til regeldefinisjonen.
              </p>
            </li>
          </ul>

          <figure>
            <img src="/docs/images/guides/tul/handling.png">
            <figcaption>
              <h4>
                Figur 159 – Handling
              </h4>
            </figcaption>
          </figure>

          <p>
            Merk at man ikke får skrevet mer enn fem if-setninger i betingelsene. Hvis man vil implementere det for kalkyler med flere felter så må man bruke <em>uttrykksbokser</em>. Dette gjøres ved å ”mellomlagre” deler på den måten at man tar f.eks. to if-setninger og lagrer resultatet av denne i en uttrykksboks og benytter da den aggregerte verdien inn i den betingelsen det ikke var plass.
          </p>

          <p>
            Omskrivning av kalkyle:
          </p>

          <p>
            Denne metoden kan sees på som et alternativ til ”Regler …” metoden.
          </p>

          <p>
            Istedenfor å bruke regler til å tømme summeringsfeltene på hvert av feltene som inngår i kalkylen, vil vi nå kun bruke en formel i summeringsfeltes standardverdi.
          </p>

          <p>
            Vi bruker en string metode for å bestemme om kalkylen skal vises eller ikke:
          </p>

          <pre><code>substring(Kalkyle, 1, (Betingelse) * (1 div 0))
</code></pre>
          <p>
            Hvor ”Kalkyle” byttes ut med kalkylen og ”Betingelse” byttes ut med en eller-sjekk på om alle feltene som ingår i kalkylen er tomme.
          </p>

          <ul>
            <li>Høyre klikk på summeringsfeltet og velg ”Egenskaper”
            </li>

            <li>Trykk deretter på ”fx” knappen til høyre for ”verdi” feltet
            </li>

            <li>Med utgangspunkt i malen overfor, fyll ut formelen, erstatt ”Kalkyle” med:
            </li>
          </ul>

          <pre><code>sum(UtleieInntektSpesifisertEiendom-datadef-22014) + 
VedlikeholdskostnaderMvLeietakere-datadef-22032 + 
InntekterAndre-datadef-22101 + 
sum(UtleieInntektSpesifisertEiendom-datadef-22014) + 
EgenleieKarInntekt-datadef-22026
</code></pre>
          <ul>
            <li>Erstatt ”Betingelse” med:
            </li>
          </ul>

          <pre><code>(count(UtleieInntektSpesifisertEiendom-datadef-22014[. != ""]) &gt; 0 or VedlikeholdskostnaderMvLeietakere-datadef-22032 != "" or InntekterAndre-datadef-22101 != "" or count(UtleieInntektSpesifisertEiendom-datadef-22014[. != ""]) &gt; 0 or EgenleieKarInntekt-datadef-22026 != "")
</code></pre>
          <ul>
            <li>Dermed vil resulatet som vises i tekstboksen bli summen av kalkylen hvis en eller flere av feltene som inngår i kalkylen er ikke-tomme.
            </li>
          </ul>

          <p>
            Kalkyler i repeterende gruppe legges inn på samme måte. Hvis noen repeterende felter skal summeres opp i feltet som er utenfor repeterende gruppe så skal man bruke funksjon SUM og sette inn feltet som skal summeres.
          </p>

          <p>
            Flere tips:
          </p>

          <ul>
            <li>Man har tilgang til alle variabler fra alle sider
            </li>

            <li>Man kan kopiere enkelte regler ved å velge “Kopier regel”-ikonet, eller man kan velge og kopiere alle regler for et felt ved å velge “Kopier alle”-ikonet.
            </li>

            <li>For å skrive kompliserte kalkyler i C#, kan man under Utvikler menylinjen velge Visning byttet-hendelse
            </li>

            <li>For å telle antall ikke-tomme felt skal man bruke formel <code>count(felt_xxx[text() != ""])</code>
            </li>

            <li>For å sette in formel med betingelse bruk (field1 | field2)[condition]. For eksempel se <a href="http://blogs.msdn.com/infopath/archive/2006/11/27/conditional-default-values.aspx">http://blogs.msdn.com/infopath/archive/2006/11/27/conditional-default-values.aspx</a>
            </li>

            <li>Hvis man skal summere det totale, f.eks pris*antall som repeteres bruk: <code>sum(eval(grp-3455; " datadef-17677 * datadef-23949"))</code>
            </li>

            <li>Ref. <a href="http://blogs.msdn.com/infopath/archive/2006/12/04/xpath-powers-calculating-totals.aspx">http://blogs.msdn.com/infopath/archive/2006/12/04/xpath-powers-calculating-totals.aspx</a>
            </li>

            <li>I noen tilfeller vil det ikke være mulig å sette inn feltnavn ved å peke på feltene, og man får gjerne en feilmelding når en prøver på det. I så fall kan man kopiere XPath (for å få tak i XPath så skal man finne feltet i datakilden, høyreklikke og velge kopier XPath) og fjerne stien slik at det kun feltenavn står igjen.
            </li>

            <li>For å summere det totale som ovenfor (pris*antall som repeteres bruk) men kun ved spesielle betingelser bruker man formel under. Eksempel gjelder summering kun de tilfellene der valget i en nedtrekksliste ikke er lik ”S”)
            </li>
          </ul>

          <pre><code>sum(eval(NyutstedteAksjerOmfordeling-grp-3455[AksjerNyutstedteFondsemisjonMvType-datadef-17679 != "S"]; "AksjerNyutstedteFondsemisjonMvAntall-datadef-17677 * AksjerNyutstedteFondsemisjonMvPalydende-datadef-23949"))
</code></pre>
          <h2 id="valideringer">
            Valideringer
          </h2>

          <p>
            Valideringen forhindrer bruker fra å levere feilaktige data eller f.eks data som ikke kan leveres sammen eller ikke stemmer med hverandre. Valideringen kjøres uansett om feltet er tomt (forskjell fra Altinn I løsning).
          </p>

          <p>
            Valideringer som gjør bruk av verdier i felles datakilde (skjemasett) må bruke disse verdiene direkte og ikke mellomlagre de i hjelpefelter. Hvis hjelpefelter benyttes så vil ikke valideringene fungere ved innsending fra SBS.
          </p>

          <p>
            I versjon 2 er det mulig å legge til valideringer som varsler bruker om potensielle feil, men som ikke forhindrer bruker fra å levere tjenesten, dette kalles <em>myke kontroller</em>. Myke kontroller kan sees på som veiledning til sluttbruker og kan for eksempel gi brukeren beskjed om at han eller hun har skrevet inn en verdi i et felt som virker usannsynlig for et felt eller en kombinasjon av felter.
          </p>

          <p>
            For å legge inn valideringer i RF-1189, er det behov for å legge inn nok en side. Med bakgrunn i tidligere avsnitt, kan denne nå lages som vist under, med unntak av hjelpeikonet. På denne siden inngår layout tabellene ”Nettoinntekt-grp-4945” og “OmfatterKostnadeneNoeAvFolgende-grp-2330” som ligger under gruppe “Kontrollsporsmal-grp-239”:
          </p>

          <figure>
            <img src="/docs/images/guides/tul/infopath-rf1189-visning6.png?width=700">
            <figcaption>
              <h4>
                Figur 160 – Skjema RF1189. Visning 6
              </h4>
            </figcaption>
          </figure>

          <p>
            For å legge inn validering på et felt skal man høyreklikke på dette, velge Datavalidering-&gt;Legg til og legge inn betingelser og feilmelding.
          </p>

          <p>
            Legg inn følgende validering i RF-1189 for post 3.1 og radioknapp med orid :7911:
          </p>

          <p>
            Tabell 7 – Validering i RF-1189
          </p>

          <table>
            <thead>
              <tr>
                <th>
                  Skjema involvert
                </th>
                <th>
                  Kontroll
                </th>
                <th>
                  Formel
                </th>
                <th>
                  Utslagstekst i Altinn
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  RF-1189
                </td>
                <td>
                  Må svare på kontrollspørsmål om skatter
                </td>
                <td>
                  Utslag_hvis ikke felt_utfylt(:7911);
                </td>
                <td>
                  <ul>
                    <li>NOB:Vennligst svar på kontrollspørsmålet om skatter i post 3.1.
                    </li>

                    <li>NON:Ver gild og svar på kontrollspørsmålet om skattar i post 3.1.
                    </li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>

          <p>
            Dette betyr at det er obligatorisk å velge enten Ja eller Nei ved hjelp av radioknappene; feltet kan ikke være ubesvart.
          </p>

          <p>
            Høyreklikk radioknappen i post 3.1 og velg kommando ”Regler”. Velg her ”Behandle regler…” Velg så å legge til en ny validering:
          </p>

          <figure>
            <img src="/docs/images/guides/tul/datavalidering.png?width=700">
            <figcaption>
              <h4>
                Figur 161 – Datavalidering
              </h4>
            </figcaption>
          </figure>

          <p>
            Under ”Hvis betingelsen oppfylles:” velges UtgifterSkattFormueInntekt-datadef-7911 (radioknapp-feltet) og med operand ”er ikke lik” og verdi ”Ja”. Velg ”og” og legg til samme operand for samme felt, men denne gang med verdi ”Nei”. Med andre ord sjekker vi på om feltet har enten verdi Ja eller Nei. I skjermtips kan for eksempel legges inn ”Post 3.1” mens feilmelding på bokmål skal være ” Vennligst svar på kontrollspørsmålet om skatter i post 3.1.”. Trykk OK for å returnere til datavalideringsvinduet, og ”OK” for å returnere til skjermbildet.
          </p>

          <figure>
            <img src="/docs/images/guides/tul/datavalidering-betingelse.png?width=700">
            <figcaption>
              <h4>
                Figur 162 – Datavalidering, betingelse
              </h4>
            </figcaption>
          </figure>

          <p>
            Tilsvarende valideringer skal legges inn på de to øvrige radioknappfeltene for post 3.2 og 3.3. Sjekk detaljert design for nærmere spesifikasjoner.
          </p>

          <p>
            Flere tips:
          </p>

          <ul>
            <li>Merk at man ikke får lagt inn mer enn 5 betingelser samt at det ikke er mulig å sette parentes mellom OG’er og ELLER’er
            </li>

            <li>For å skrive kompliserte valideringer i C#, kan man høyreklikke på et felt og velge Programming-&gt;Validating event. I så fall må Visual Studio være installert. I InfoPath må en huske på å velge aktuell mappe fra skjemaet i Verktøy-&gt;Alternativer for skjema-&gt;Programmering-&gt;Project location for Visual Basic and C# code
            </li>

            <li>Ved store valideringer, må en benytte uttrykksbokser.
            </li>
          </ul>

          <p>
            InfoPath har ikke funksjonalitet for å støtte myke kontroller. Siden myke kontroller vil bli håndtert forskjellig fra feilvalideringer i SBL er det nødvendit å skille mellom myke kontroller og feilvalideringer i InfoPath. Dette gjøres ved å benytte et prefiks før selve meldingen. Alle myke kontroller som defineres i InfoPath-skjemaet skal ha prefikset <code>_MYK_</code>. Meldingen får dermed følgende format <code>_MYK_[meldingstekst]</code>, som for eksempel <code>_MYK_Ugyldig postnummer</code>. Teksten <code>_MYK_</code> blir fjernet før meldingen vises til bruker i SBL.
          </p>

          <h3 id="avansert-eksempel-på-validering">
            Avansert eksempel på validering
          </h3>

          <p>
            For de mer viderekomne, gis her et litt mer avansert eksempel på store valideringer med bruk av expression. Det anbefales å sjekke eksemplet i RF-1086.
          </p>

          <p>
            Implementering av følgende betingete validering i RF-1086:
          </p>

          <table>
            <tbody>
              <tr>
                <td>
                  BOH_10:1
                </td>
                <td>
                  17677, 17678, 17679, 17680, 23949
                </td>
                <td>
                  10
                </td>
                <td>
                  HVIS (orid 17677 eller orid 17678 eller orid 17679 eller orid 17680 eller orid 23949 er blanke) SÅ utslag.
                </td>
                <td>
                  I post 10 mangler ett eller flere av de følgende feltene utfylling: Antall nyutstedte aksjer, Antall aksjer etter, Hendelsestype, Tidspunkt eller Pålydende per utstedt aksje.
                </td>
              </tr>
            </tbody>
          </table>

          <p>
            Dvs. hvis noen av disse 5 felter av fylt ut skal alle være fylt ut.
          </p>

          <p>
            Nedenfor følger en anbefaling på hvordan dette kan implementeres:
          </p>

          <ul>
            <li>Opprette hjelpefelt BOH_10_1 med default value 1.
            </li>

            <li>Kopiere Xpath til alle de 5 feltene (med å høyreklikke på feltene i Data source og velge ”Kopier Xpath”).
            </li>

            <li>Opprette validering med 2 if-setninger, der det ene sjekker om noen av disse feltene er fylt ut og det andre skjekker om noen av feltene er blank – da skal man få feilmelding, fordi enten alle skal være tomme eller alle skal være utfylt.
            </li>

            <li>For å skrive if-setningene, velger man uttrykk og skriver følgene to linjer:
            </li>

            <li>Den første linjen/valideringen sjekker om noe er tomt:
            </li>
          </ul>

          <pre><code>/Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvAntall-datadef-17677 | /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvAntallEtter-datadef-17678 | /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvType-datadef-17679 | /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvTidspunkt-datadef-17680 | /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvPalydende-datadef-23949 = ""
</code></pre>
          <ul>
            <li>Videre, følger her den andre som sjekker om noe er fylt ut:
            </li>
          </ul>

          <pre><code>/Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvAntall-datadef-17677 | /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvAntallEtter-datadef-17678 | /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvType-datadef-17679 | /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvTidspunkt-datadef-17680 | /Skjema/UtstedelseAvAksjerIfmFondsemisjonSplittMv-grp-3454/NyutstedteAksjerOmfordeling-grp-3455/AksjerNyutstedteFondsemisjonMvPalydende-datadef-23949 != ""
</code></pre>
          <p>
            På grunna av at InfoPath har relativt små vinduer som ikke gir god oversikt, anbefales det å skrive alt dette i et tekst-verktøy som for eksempel Notepad og lime inn i InfoPath etterpå. Om alt legges inn korrekt vil Datavalideringsvinduet få ut noe sånt:
          </p>

          <figure>
            <img src="/docs/images/guides/tul/datavalidering-2.png?width=700">
            <figcaption>
              <h4>
                Figur 163 – Datavalidering
              </h4>
            </figcaption>
          </figure>

          <h3 id="pattern-validering">
            Pattern validering
          </h3>

          <p>
            For å legge på sjekk av gyldig verdi, for eksempel for og epost, kan man i InfoPath matche verdien mot et pattern. Et pattern er en generisk måte å uttrykke en gitt seksvens og sammensetning av tegn. Dette er også kalt regulæruttrykk. Dette gjøres også vha Datavalideringskommandoen. Eksempel på setting av mønster for epost i skjema RF-1086:
          </p>

          <figure>
            <img src="/docs/images/guides/tul/datavalidering-pattern.png?width=700">
            <figcaption>
              <h4>
                Figur 164 – Eksempel på validering av gyldig verdi i et felt vha pattern
              </h4>
            </figcaption>
          </figure>

          <p>
            I tillegg til de valideringene som legges inn av skjemautvikler så vil InfoPath/Forms Server utføre ”xsd valideringer”, dvs restriksjoner som er lagt på feltene i xsd spesifikasjonen til skjemaet. Rekkefølgen på disse feilmeldingene styres av InfoPath/FormServer, og det er ikke mulig å endre denne rekkefølgen. Microsoft har valgt å gi xsd-valideringer (f.eks sjekk på lengde, maks/min verdi og regulære uttrykk) presidens foran valideringen som sier at feltet er påkrevd. Dette er årsaken til at meldinger som f.eks. ”Only spesific pattern allowed” vises før ”Cannot be blank”.
          </p>

          <p>
            Hvis man velger å benytte pattern validering, så vil man kunne se at regulæruttrykket vises i høyrekolonnen i SBL ved validering. For å komme rundt dette, må man gjøre følgende:
          </p>

          <ol>
            <li>Legg inn et hjelpefelt istedenfor feltet som har pattern validering. Feltet som kommer fra datakilde skal da ikke dras inn i skjemaet.
            </li>

            <li>Legg inn en egen pattern validering på hjelpefeltet med en egen feilmelding slik at denne vises istedenfor pattern valideringsmeldingen fra xsd’en.
            </li>

            <li>Overfør verdien til det egentlige feltet fra hjelpefeltet.
            </li>

            <li>Hvis dette gjelder felter i en repeterende gruppe så må hjelpefeltet ligge i en altinn xsd, ellers samme prinsipp.
            </li>
          </ol>

          <p>
            Hvis denne metodikken benyttes vil man unngå at regulæruttrykkene vises i SBL.
          </p>

          <h3 id="validering-fra-vsta-c-kode">
            Validering fra VSTA / C#-kode
          </h3>

          <p>
            I enkelte tilfeller ønsker man også å kunne produsere valideringsmeldinger fra C#-koden.
          </p>

          <p>
            Dette gjøres ved at man i koden har følgende kode for hver valideringsmelding:
          </p>

          <pre><code class="language-csharp">public void InnsenderHvitvaskingAnsvarligFornavn_2D_datadef_2D_33869_Validating(object sender, XmlValidatingEventArgs e)
{
    if (e.Site.Value.Equals("123"))
    {
         e.ReportError(e.Site, true, "Feilmelding");
    }
}
</code></pre>
          <p>
            Merk at man også her, hvis ønskelig, benytter ressurstekster (ref. kap 21.1.1) til å kunne vise feilmeldingen på språket som sluttbruker har valgt i portalen (SBL). Man trenger ikke gjøre noe annet enn å hente inn teksten fra ressurstekstens datakilde. Bl.a. språk trenger man ikke ta hensyn til da ressurstekstene er allerede knyttet til skjema på riktig språk.
          </p>

          <p>
            Altinn portalen er utvidet med funksjonalitet for å trigge validering av hovedskjema (HS) når et underskjema (US) valideres.
          </p>

          <p>
            Hvis man legger inn et hjelpefelt som heter ValidateMainForm, som ligger i my namespacet (my:ValidateMainForm), og som har verdien “true”, så vil Altinn portalen gjøre en validering av HS hvis HS allerede er validert OK.
          </p>

          <h2 id="dynamikk">
            Dynamikk
          </h2>

          <p>
            Dynamikk går ut på at utseende/oppførsel til et felt i skjermbildet, er avhengig av en betingelse knyttet til informasjon i et annet felt. Utfra de sidene som nå er laget i skjema RF-1189, kan det legges inn dynamikk for følgende spesifikasjon fra detaljert design:
          </p>

          <p>
            Tabell 8 – Dynamikk
          </p>

          <table>
            <thead>
              <tr>
                <th>
                  Feltnavn (Datadef/orid)
                </th>
                <th>
                  Post i skjema
                </th>
                <th>
                  Beskrivelse av dynamikk
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  7911/ 7912
                </td>
                <td>
                  3.1
                </td>
                <td>
                  Beløpsfelt skal gråes ut hvis svar er nei
                </td>
              </tr>

              <tr>
                <td>
                  7913/ 7914
                </td>
                <td>
                  3.2
                </td>
                <td>
                  Beløpsfelt skal gråes ut hvis svar er nei
                </td>
              </tr>

              <tr>
                <td>
                  7915/ 7916
                </td>
                <td>
                  3.3
                </td>
                <td>
                  Beløpsfelt skal gråes ut hvis svar er nei
                </td>
              </tr>
            </tbody>
          </table>

          <p>
            Dette er en vanlig form for dynamikk, som altså går ut på å ”disable” et felt ved inntreff av en betingelse. Normalt ønskes det at både feltet og ledeteksten blir ”grået ut”, og at det ikke er mulig å klikke inn i feltet. I tillegg skal feltet her blankes ut. Denne dynamikken skal inn på samme skjemaside som også vist i ”Figur 1189 View 6” i forrige avsnitt (Valideringer):
          </p>

          <figure>
            <img src="/docs/images/guides/tul/infopath-rf1189-visning6.png?width=700">
            <figcaption>
              <h4>
                Figur 165 – RF-1189
              </h4>
            </figcaption>
          </figure>

          <p>
            Som spesifikasjonen viser, gjelder dynamikken alle de 3 siste postene. Her nøyer vi oss med å legge den inn for Post 3.1, vha følgende framgangsmåte:
          </p>

          <ul>
            <li>Høyreklikke på feltet 7912 (”Ev. beløp”) og velge ”Betinget formattering…”.
            </li>

            <li>
              <p>
                Først skal vi sette feltet vårt til <em>Skrivebeskyttet</em>. Trykk knappen ”Legg til…” for å legge inn betingelsen på samme vis som ved valideringer (opp til 5 linjer) som vist under:
              </p>

              <figure>
                <img src="/docs/images/guides/tul/betinget-formattering.png?width=700">
                <figcaption>
                  <h4>
                    Figur 166 – Betinget formattering
                  </h4>
                </figcaption>
              </figure>
              Det er her kun behov for en linje i betingelsen. I første nedtrekkslisteboksen velges radioknappfeltet ”UtgifterSkattFormueInntekt-datadef-7911”, i neste ”er ikke lik” og verdien i det siste skal være ”Nei”. Til slutt klikkes det på ”skrivebeskyttet” og ”OK”. I dette tilfellet velger vi ikke at feltet skal skjules, noe som kan ellers kan være aktuelt. For de andre radioknappene i samme ”gruppe” vil det være vice versa.
              <p></p>
            </li>

            <li>
              <p>
                Merk at feltet <em>ikke</em> blir tømt selv når det er skrivebeskyttet eller skjult. Derfor må verdien fjernes manuelt ved å opprette en regel (Rule) på det feltet som styrer dynamikken (radioknapp feltet 7911). Det er verdt å merke seg at reglene kjøres <em>kun</em> når feltene er blitt valgt og gitt en verdi. Regel opprettes ved å:
              </p>

              <ul>
                <li>Høyreklikke radioknapp feltet 7911.
                </li>

                <li>Velge ”Regler…”.
                </li>

                <li>Klikk på ”Legg til…” knappen for å legge til en ny regel.
                </li>

                <li>Klikk ”Angi betingelse …” for å sette opp betingelse for når regelen skal kjøres (”UtgifterSkattFormueInntekt-datadef-7911” ”is equal to” ”Nei”).
                </li>

                <li>Trykk OK for å returnere.
                </li>

                <li>Til sist settes selve aksjonen opp ved å trykke på ”Legg til handling …”.
                </li>

                <li>Handling settes til ”Sett feltverdi”.
                </li>

                <li>Felt skal være ” UtgifterSkattFormueInntektBelop-datadef-7912”.
                </li>

                <li>Verdi skal være blank.
                </li>
              </ul>
            </li>

            <li>
              <p>
                For å utføre dynamikken også på ledetekst ”Ev. beløp”, må denne være opprettet som uttrykksboks. Uttrykksbokser kan behandles som et vanlig felt og man kan legge på samme betinget formattering på den. Til forskjell fra formatet på feltet, kan det her settes en fargekode som for et felt som er skrivebeskyttet (ref avsnitt <em>Fargekoder Altinn</em>)
              </p>
            </li>
          </ul>

          <h3 id="avansert-eksempel-på-dynamikk">
            Avansert eksempel på dynamikk
          </h3>

          <p>
            For de mer viderekomne, gis her et noe mer avansert eksempel på dynamikk som krever bruk av expressions. Eksemplet kan sjekkes i RF-1097. Bruk av expressions er nødvendig dersom man må bruke flere enn 5 felt/betingelser. Formelen må da bygges opp ved å bruke XPath på feltene.
          </p>

          <p>
            NB! InfoPath bryter automatisk en stor expression i flere. Derfor bør man ikke blande or og and i samme expression
          </p>

          <p>
            Nedenfor eksempel fra RF-1097:
          </p>

          <pre><code>/Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = "1" or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = "3" or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = "5" or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = "11" or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = "12" or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = "14" or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = "20" or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = "67" or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = "68" or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = "69" or /Skjema/SoknadOmEndringAvEllerKravOmForskuddsskatt-grp-7675/Innsender-grp-7676/EnhetOrganisasjonsform-datadef-30638 = "86"
</code></pre>
          <p>
            Slik blir eksempelet seende ut i InfoPath:
          </p>

          <figure>
            <img src="/docs/images/guides/tul/betingelse.png?width=700">
            <figcaption>
              <h4>
                Figur 167 – Betingelse
              </h4>
            </figcaption>
          </figure>

          <h2 id="ressursfiler-og-tekstfiler">
            Ressursfiler og tekstfiler
          </h2>

          <p>
            I skjemaet kan man komme borti situasjoner hvor man har behov for å oversette tekster som ikke kan puttes inn i uttrykksbokser eller av andre grunner ikke kan oversettes i TUL. For å kunne benytte slike tekster velger man å bruke <em>ressursfiler.</em> En ressursfil kan være en hvilken som helst fil, som InfoPath pakker sammen med skjemaene.
          </p>

          <p>
            For å få ressursfiltekster til oversetting i TUL velger man å lage seg en XML-fil som man kaller <em>Ressurstekster.xml</em>. Denne må være på følgende format og innholdet må være på utgavens hovedspråk:
          </p>

          <pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;ResourceTexts&gt;
  &lt;ResourceText name="orgnr_kan_ikke_brukes"&gt;
    &lt;Message&gt;Organisasjonsnummer kan ikke brukes&lt;/Message&gt;
    &lt;MessageDetail&gt;Vennligst korrigèr org.nr.&lt;/MessageDetail&gt;
  &lt;/ResourceText&gt;  
  &lt;ResourceText name="fnr_er_ikke_gyldig"&gt;
    &lt;Message&gt;Fødselsnummeret kan ikke brukes&lt;/Message&gt;
    &lt;MessageDetail&gt;Vennligst korrigèr fødselsnummer&lt;/MessageDetail&gt;
  &lt;/ResourceText&gt;
&lt;/ResourceTexts&gt;
</code></pre>
          <p>
            Som man ser fra XML’en over så har man flere sett med tekster, hvor hver nøkkel ( har to korresponderende tekster. Dette blir på samme måte som med valideringstekster.
          </p>

          <p>
            Det er viktig at nøkkelen er unik innad i skjemaet. Man kan ha så mange tekstsett man vil.
          </p>

          <p>
            Et sett med tekster er definert vha &lt;ResourceText&gt; -noden.
          </p>

          <p>
            Når XML-filen er ferdig, velger man å legge den til i InfoPath. Dette gjøres ved gå til <em>Verktøy</em> på menylinjen og velge <em>Ressursfiler…</em> Legg deretter til Ressurstekster.xml. Nå er det flere måter å ta i bruk tekstene på, men det letteste er å legge til en datakobling mot denne ressursfilen. Dette gjøres på samme måte som man legger til en kodeliste, men istedenfor å hente data fra en web-service, velger man å hente fra et XML-dokument. På neste side klikker man på <em>Ressursfiler…</em> og velger Ressurstekster.xml. Nå er disse tekstene klare for å benyttes i skjema, på samme måte som felter fra hoveddatakilden.
          </p>

          <p>
            Tekstene i filen Ressurstekster.xml vil være tilgjengelig for oversetting i TUL sin oversettingsmodul etter at skjemaet er sjekket inn. På denne måte vil InfoPath-filene på de ulike språkene ha lokaliserte ressurstekster.
          </p>

          <p>
            Under følger et eksempel på hvordan man tar i bruk en ressurstekst i en regel.
          </p>

          <p>
            Når man legger til en hendelse på en regel, velger man å sette verdi i et felt. Dette er default-valget i en ny regel. Deretter velger man feltet som skal få en verdi, og så verdien, enten <em>Message</em> eller <em>MessageDetail</em>. For å hente riktig verdi velger man å lage en xPath ved å klikke på funksjonsknappen. Velg så å legg til felt eller gruppe og velg datakilden til ressursfilen. Her velger man feltet Message og så <em>Filtrer Data.</em> Det som er viktig nå, er at man filtrerer på name; velg å legg til ny filtrering og definer at name skal være lik, og så må man angi nøkkelen til tekstsettet man ønsker å benytte.
          </p>

          <p>
            På denne måten vil man kunne bruke tekster fra annet enn uttrykksbokser/skjemaelementer, oversette de i TUL og fylle de inn i inputbokser etc.
          </p>

          <h2 id="hjelpefelter-verdioverføringer">
            Hjelpefelter, verdioverføringer
          </h2>

          <p>
            Man kan opprette hjelpefelter som ikke finnes opprinnelig i XSD og bruke dem f.eks for å vise delsummer på andre sider. For å opprette felt eller gruppe skal man velge ”Datakilde”, høyreklikke på ”Skjema” og velge ”Legg til…”. Skriv her inn navn på felt og trykk OK. Feltet vises nå under ”Datakilde” på skjemaets høyeste nivå. Deretter kan man dra feltet fra ”Datakilde” til visning (side) og plassere feltet der man vil og velge ønsket felttype (kontrol).
          </p>

          <figure>
            <img src="/docs/images/guides/tul/legg-til-felt-gruppe.png?width=700">
            <figcaption>
              <h4>
                Figur 168 – Legg til felt/gruppe
              </h4>
            </figcaption>
          </figure>

          <p>
            Merk at i ”Datakilde” forblir feltet på øverste nivå, det er ikke mulig å få flyttet det til andre sider eller grupper som er definert i XSD.
          </p>

          <h3 id="verdioverføringer">
            Verdioverføringer
          </h3>

          <p>
            For å vise verdien fra et felt på en annen side (view) i skjema, trenger en ikke å opprette duplikate-felt. For dette kan man bare dra det originale feltet fra ”Datakilde” til de stedene man vil ha det (husk at å la alle disse kopiene være skrivebeskyttet).
          </p>

          <p>
            Eksempel på verdioverføring finnes allerede i skjemaeksemplet vårt. Se ”Figur 1189 visning 6” eller visning 6 i InfoPath. Der viser feltet for samlet bruttoinntekt den overførte verdien fra post 1.5 i visning 3. Dette har skjedd automatisk ved at feltet ”BruttoinntektUtleieMv-datadef-22033” også er blitt opprettet i visning 6.
          </p>

          <p>
            Man trenger dermed ikke å overføre verdier av delsummer fra side til side, fordi en i InfoPath har tilgang til alle variabler fra alle steder i skjema.
          </p>

          <p>
            Man får ikke opprettet egendefinerte grupper eller repeterende felter, men man kan legge kontrolluttryksboks inn i repeterende gruppe og opprette kalkyler eller dynamikk der.
          </p>

          <p>
            Når man oppretter lister, eksempelvis nedtrekkslister, vil verdien denne viser være kodeverdien. For at man skal få frem tekstverdien som svarer til denne koden, må man benytte seg av et hjelpefelt. I hjelpefeltet henter man tekstverdien som svarer til koden ifra listen. Hjelpefeltet defineres så som en presentasjonsfelt istedenfor listen. På denne måten vil tekstverdien og ikke kodeverdien vises i den aktuelle listen.
          </p>

          <h2 id="web-print-og-kvitteringssider">
            Web-, print- og kvitteringssider
          </h2>

          <p>
            For å lage printutgaver basert på skjermbildene på Web, skal man opprette så mange view’er som det er sider i skjema, kalle dem f.eks ”Print view 1” osv. Deretter kopiere og lime innholdet fra hver side til tilhørende print view side.
          </p>

          <p>
            Print view’ene kan settes til å være read-only ved å velge ”Egenskaper” under “Sideutforming” flipp ”Generelt” og krysse av for skrivebeskyttet. I flipp ”utskriftsinnstillinger” kan man også sette formatet på side som skal skrives ut. Benytt gjerne forhåndsvisfunksjonen for å verifisere utskriftversjon.
          </p>

          <figure>
            <img src="/docs/images/guides/tul/egenskaper-for-visning.png">
            <figcaption>
              <h4>
                Figur 169 – Egenskaper for visning
              </h4>
            </figcaption>
          </figure>

          <p>
            Hvis man vil ha en annen layout på printutgavene, for eksempel slå sammen flere web sider på samme printside, så er det bare å opprette det nødvendige antall visninger, definere ønsket layout, for eksempel ved å kopiere felter fra andre web sider (views) eller dra dem direkte fra datakilden.
          </p>

          <p>
            Kvittering opprettes på samme måte. Lag et ekstra view og kall den f.eks ”Receipt”. Definer deretter layout og legge på de feltene som man ønsker å ha på kvitteringen.
          </p>

          <p>
            Det er også mulig å definere hjelpefelter og legge dem på print utgaver og kvitteringen
          </p>

          <h2 id="hjelpetekster-knapper">
            Hjelpetekster (knapper)
          </h2>

          <p>
            Svært mange skjermbilder i Altinn er definert med mulighet for å få opp hjelpeinformasjon på skjermen. Til dette benyttes det i InfoPath hjelpeknapper som ser slik ut:
          </p>

          <figure>
            <img src="/docs/images/guides/tul/hjelpeknapp.png">
            <figcaption>
              <h4>
                Hjelpeknapp
              </h4>
            </figcaption>
          </figure>

          <p>
            Bildefilene vil du finne på <code>\\alt-tul-db-c02\tulshare\InfoPath\Etater</code> på TUL-Share.
          </p>

          <p>
            For å plassere en bildeknapp i skjermbildet, klikk på «Picture button» under «Controls» på hjemmefanen. Klikk på knappen for å vise «Button Properties». Her kan knappen tilpasses. Klikk «Picture» for å legge til hovedbildet. Klikk «Hover» for å legge til bilde som skal vises når du holder musen over knappen.
          </p>

          <p>
            Deretter kan knappen kopieres til alle stedene i skjema hvor det skal være hjelpeknapper, og det gjenstår bare å endre til respektive Id’er:
          </p>

          <ul>
            <li>Høyreklipp på bildeknappen og velg egenskaper for bildeknapp.
            </li>

            <li>Endre ID fra <em>CTRLXX</em> til <em>HelpText_xxx</em>, hvor xxx er valgfri.
            </li>
          </ul>

          <figure>
            <img src="/docs/images/guides/tul/egenskaper-knapp.png">
            <figcaption>
              <h4>
                Figur 170 – Egenskaper for knapp
              </h4>
            </figcaption>
          </figure>

          <h2 id="sporvalg">
            Sporvalg
          </h2>

          <p>
            For at sporvalgsfelter skal fungere i InfoPath skjema, er det nødvendig med to handlinger. Først må sporvalgsfeltet settes til å alltid poste tilbake til serveren. Dette gjøres ved å dobbeltklikke feltet, velge flipp <em>Webleserskjemaer</em> og velg radioknapp <em>Alltid,</em> som vist under:
          </p>

          <figure>
            <img src="/docs/images/guides/tul/innstillinger-for-tilbakesending.png">
            <figcaption>
              <h4>
                Figur 171 – Innstillinger for tilbakesending
              </h4>
            </figcaption>
          </figure>

          <p>
            Det andre er at det må legges inn C# kode for feltets <em>Changed</em> hendelse. Sporvalg er ikke er en del av eksempel skjema RF-1189, men kan enkelt legges til ved å benytte “Utvikler” og “Endret hendelse”:
          </p>

          <figure>
            <img src="/docs/images/guides/tul/infopath-kodeliste.png?width=700">
            <figcaption>
              <h4>
                Figur 172 – InfoPath, kodeliste
              </h4>
            </figcaption>
          </figure>

          <p>
            Følgende kode skal legges inn for dette feltet:
          </p>

          <pre><code class="language-csharp">NotifyHost("TrackFieldChanged_" + e.Site.Name);
</code></pre>
          <p>
            Dette skal legges i metoden som automatisk ble lagt til av Visual Studio.
          </p>

          <pre><code class="language-csharp">public void OppgaveAr_2D_datadef_2D_11236_Changed(object sender, XmlEventArgs e)
{
    NotifyHost("TrackFieldChanged_" + e.Site.Name);
}
</code></pre>
          <p>
            Hvis det benyttes avmerkingsbokser for sporvalg, må det håndteres at kombinasjonen av disse angir et spor. Ellers må samme kode legges på <em>Changed</em> hendelsen for avmerkingsbokser.
          </p>

          <h2 id="innlegging-av-kode-i-et-skjema">
            Innlegging av kode i et skjema
          </h2>

          <p>
            For å kunne legge inn kode i skjema må man gjøre følgende:
          </p>

          <ul>
            <li>Velg ”Fil”, deretter “Alternativer for skjema” fra verktøymenyen.
            </li>

            <li>Velg ”Programmering”.
            </li>

            <li>Velge C# som programmerings språk under <em>Kodespråk for skjemamal</em>. Merk at denne kan være grået ut og forhåndsvalgt.
            </li>

            <li>I <em>Prosjektplassering</em>, bla til mappe hvor InfoPath skal legge koden, helst i samme mappe som XSN fila (skjemafilen) på TUL-Share.
            </li>
          </ul>

          <p>
            Merk at når man har kodet ferdig, må man velge Build i Visual Studio for å sikre at koden blir med inn i skjema.
          </p>

          <p>
            Se eksempel nedenfor:
          </p>

          <figure>
            <img src="/docs/images/guides/tul/alternativer-for-skjema-2.png?width=700">
            <figcaption>
              <h4>
                Figur 173 – Alternativer for skjema. Programmering
              </h4>
            </figcaption>
          </figure>

          <h2 id="forhåndsvisning-og-enhetstest-i-infopath">
            Forhåndsvisning og enhetstest i InfoPath
          </h2>

          <p>
            I InfoPath gis det mulighet til å foreta en enkel inspeksjon av hvordan skjema fungerer, ved å benytte ”Forhåndsvisnings”-valget. Denne finnes i verktøylinja i InfoPath og kan benyttes til enhetstest av skjema. For eksempel kan det legges inn verdier, og en kan verifisere at feltene oppfører seg som de skal. Det samme gjelder for kalkylene som er lagt inn. Eksempel fra RF-1189 View 3:
          </p>

          <figure>
            <img src="/docs/images/guides/tul/infopath-forh%c3%a5ndsvisning.png?width=700">
            <figcaption>
              <h4>
                Figur 174 – Forhåndsvisning i InfoPath
              </h4>
            </figcaption>
          </figure>

          <p>
            For å komme tilbake til Design modus, velges ”Lukk forhåndsvisning” fra verktøylinja.
          </p>

          <p>
            Viktig tips dersom det vises følgende feilmelding når en skal åpne forhåndsvisning:
          </p>

          <blockquote>
            <p>
              “InfoPath cannot open the selected form”
            </p>
          </blockquote>

          <p>
            I InfoPath må da kommando “Fil -&gt; Alternativer for skjema -&gt; Sikkerhet og klarering” velges, deretter:
          </p>

          <ul>
            <li>Huk av “Bestem sikkerthetsnivå automatisk (anbefales)”
            </li>

            <li>Velg radioknapp ”Fullstendig klarering” og trykk ”OK”
            </li>
          </ul>

          <p>
            Dette tipset er for øvrig hentet fra <a href="http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/4f497859-b1f7-4498-95cb-bb9903bfaf5c">http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/4f497859-b1f7-4498-95cb-bb9903bfaf5c</a> (Gjelder for 2007 versjon, men kan fortsatt være til hjelp i 2010 versjon)
          </p>

          <p>
            Merk at det ikke er mulig å teste preutfylling eller uthenting av andre data fra sluttbrukerløsningen. Man får dog testet alle hjelpevariabler, kodeliste etc.
          </p>

          <h2 id="fargekoder-altinn">
            Fargekoder Altinn
          </h2>

          <blockquote>
            <p>
              Foreløpig utgave pr 2009-05-18…
            </p>
          </blockquote>

          <table>
            <thead>
              <tr>
                <th>
                  Fargekode
                </th>
                <th>
                  RGB
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  Bakgrunn side
                </td>
                <td>
                  241,245,247
                </td>
              </tr>

              <tr>
                <td>
                  Bakgrunn grupperamme
                </td>
                <td>
                  226,234,240
                </td>
              </tr>

              <tr>
                <td>
                  Rammestrek rundt grupperamme
                </td>
                <td>
                  212,224,231
                </td>
              </tr>

              <tr>
                <td>
                  Overskrift - skjema (9pt bold)
                </td>
                <td>
                  22,55,68
                </td>
              </tr>

              <tr>
                <td>
                  Strek øverst på siden
                </td>
                <td>
                  223,237,239
                </td>
              </tr>

              <tr>
                <td>
                  Overskrift gruppe (8pt bold)
                </td>
                <td>
                  0,51,102
                </td>
              </tr>

              <tr>
                <td>
                  Ledetekst (8pt)
                </td>
                <td>
                  0,51,102
                </td>
              </tr>

              <tr>
                <td>
                  Felttekst (8pt)
                </td>
                <td>
                  0,51,102
                </td>
              </tr>

              <tr>
                <td>
                  Fremskutt hjelpetekst
                </td>
                <td>
                  112,150,175
                </td>
              </tr>

              <tr>
                <td>
                  Bakgrunn - Skrivebekyttet felt
                </td>
                <td>
                  226,234,240 (samme som bagrunn grupperamme)
                </td>
              </tr>

              <tr>
                <td>
                  Hjelpeikon - bakgrunn
                </td>
                <td>
                  231,226,161
                </td>
              </tr>

              <tr>
                <td>
                  Ramme rundt felt
                </td>
                <td>
                  212,208,200
                </td>
              </tr>

              <tr>
                <td>
                  Ramme rundt web-side
                </td>
                <td>
                  184,203,216 (vises på WEB-PRINT)
                </td>
              </tr>
            </tbody>
          </table>

          <p>
            <em>I beskrivelsen over vil f.eks. 9ptbold bety skriftstørrelse 9 og fete typer.</em>
          </p>

          <p>
            <strong>Skrifttyper</strong>
          </p>

          <p>
            Det er for InfoPath-skjemaer , som for HTML generelt når det gjelder skrifttyper (fonts).
          </p>

          <p>
            Det er derfor viktig å velge standardiserte skrifttyper som f.eks. Arial, Verdana, Times New Roman, Lucida etc. Det vil være opp til sidemalen hvilken skrifttype som bør benyttes, samt hvordan denne vises i de ulike browserene/OS’ene.
          </p>

          <p>
            <strong>Sette fargekoder i InfoPath</strong>
          </p>

          <ol>
            <li>Ekspander nedtrekksgardin for farge.
            </li>

            <li>Velg More Colors.<br>
            </li>
          </ol>

          <p>
            <strong>I vindu “Farge”:</strong>
          </p>

          <ol>
            <li>Velg en hvit tom rute under seksjon egendefinerte farger.
            </li>

            <li>Endre fargekoder for rød, Grønn og Blå (se koder over).
            </li>

            <li>Legg til egendefinert farge.
            </li>

            <li>Lagre som en egendefinert farge .
            </li>

            <li>OK.
            </li>
          </ol>

          <footer class="footline">
          </footer>
        </div>
      </div>

      <div id="navigation">
        <a class="nav nav-prev" href="/docs/guides/tul/vedlegg/" title="Vedlegg"><i class="fa fa-chevron-left"></i></a> <a class="nav nav-next" href="/docs/guides/tul/vedlegg/b/" title="B: Utforming av brukergrensesnitt for skjema" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
      </div>
    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      </div>
    </div>
    <script src="/docs/js/clipboard.min.js"></script> 
    <script src="/docs/js/featherlight.min.js"></script> 
    <script src="/docs/js/html5shiv-printshiv.min.js"></script> 
    <script src="/docs/js/highlight.pack.js"></script> 
    <script>
    hljs.initHighlightingOnLoad();
    </script> 
    <script src="/docs/js/modernizr.custom.71422.js"></script> 
    <script src="/docs/js/learn.js"></script> 
    <script src="/docs/js/hugo-learn.js"></script>
    <link href="/docs/mermaid/mermaid.css" type="text/css" rel="stylesheet">
    <script src="/docs/mermaid/mermaid.js"></script> 
    <script>
    mermaid.initialize({startOnLoad:true});
    </script>
  </body>
</html>
